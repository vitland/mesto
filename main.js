(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e,this._token=n}var n,r;return n=t,(r=[{key:"_getResult",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUser",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"editUser",value:function(t){var e=this,n=t.name,r=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,about:r})}).then((function(t){return e._getResult(t)}))}},{key:"editUserAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return e._getResult(t)}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"addCard",value:function(t){var e=this,n=t.name,r=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,link:r})}).then((function(t){return e._getResult(t)}))}},{key:"removeCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=".elements__template",o=".element__image",i=".element__fav",u={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_active",inputErrorClass:"form__input-error",errorClass:"form__input-error_visible",inputErrorBorder:"form__input_error"},a=document.querySelector(".profile__avatar-container"),c=document.querySelector(".profile__button-change"),l=document.querySelector(".form__input_type_name"),s=document.querySelector(".form__input_type_occupation"),f=document.querySelector(".profile__button-add"),p=document.forms["profile-form"],y=document.forms["place-form"],m=document.forms["avatar-form"];function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var b=function(){function t(e,n,r,u,a,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._likeHandler=c,this._cardId=e._id,this._ownerId=e.owner._id,this._currentUser=n,this._templateSelector=r,this._openImagePopup=u,this._openConfirmPopup=a,this.element=this._getTemplate(),this._image=this.element.querySelector(o),this._likeCounter=this.element.querySelector(".element__fav-counter"),this._imageCaption=this.element.querySelector(".element__text"),this._removeIcon=this.element.querySelector(".element__bin"),this._favButton=this.element.querySelector(i)}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this.element.querySelector(".element__bin").addEventListener("click",(function(){return t._openConfirmPopup(t._cardId,t.element)})),this.element.querySelector(i).addEventListener("click",(function(e){return t._likeHandler(e,t._cardId,t._likeCounter)})),this.element.querySelector(o).addEventListener("click",(function(e){t._openImagePopup({name:e.target.alt,link:e.target.src})}))}},{key:"generateCard",value:function(){var t=this;return this._currentUser.id===this._ownerId&&this._removeIcon.classList.remove("disabled"),this._likes.find((function(e){return e._id===t._currentUser.id}))&&this._favButton.classList.toggle("element__fav_active"),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._imageCaption.textContent=this._name,this._likeCounter.textContent=this._likes.length,this.element}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(e._container,t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var E=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o),this.user={}}var e,n;return e=t,(n=[{key:"setUserInfo",value:function(t){t.name&&(this._name.textContent=t.name,this.user.name=t.name),t.about&&(this._about.textContent=t.about,this.user.about=t.about),t._id&&(this._id=t._id,this.user.id=t._id),t.avatar&&(this._avatar.src=t.avatar,this.user.avatar=t.avatar)}},{key:"getUserInfo",value:function(){return this.user}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var P=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&(window.removeEventListener("keydown",i._handleEscClose),i._popup.classList.remove("popup_opened"))},(r=O(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){window.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){window.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-icon"))&&t.close()})),window.addEventListener("keydown",this._handleEscClose)}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupImageCaption=e._popup.querySelector(".popup__image-caption"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;I(R(u.prototype),"open",this).call(this),console.log(this._popup),this._popupImage.src=n,this._popupImage.alt=e,this._popupImageCaption.textContent=e}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},A.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._handleSubmitForm=e,n._form=n._popup.querySelector(".form"),n._inputList=Array.from(n._form.querySelectorAll(".form__input")),n._submitButton=n._form.querySelector(u.submitButtonSelector),n}return e=a,(n=[{key:"_getInputValues",value:function(){return this._inputList.reduce((function(t,e){return t[e.name]=e.value,t}),{})}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var t=this;A(D(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){A(D(a.prototype),"close",this).call(this),this._form.reset()}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},H.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._button=n._popup.querySelector(u.submitButtonSelector),n._handleSubmit=e,n}return e=a,(n=[{key:"_setEventListeners",value:function(){var t=this;H(M(a.prototype),"setEventListeners",this).call(this),this._button.addEventListener("mousedown",(function(e){e.preventDefault(),t._handleSubmit(t._cardId,t._element)}))}},{key:"open",value:function(t,e){H(M(a.prototype),"open",this).call(this),this._cardId=t,this._element=e,this._setEventListeners()}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._formElement=n,this._inputList=function(t){if(Array.isArray(t))return G(t)}(r=this._formElement.querySelectorAll(this._options.inputSelector))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._formElement.addEventListener("submit",(function(t){return t.preventDefault()})),this._formElement.addEventListener("reset",(function(){setTimeout((function(){return t.setButtonState()}),0)})),this._formElement.querySelectorAll(this._options.inputSelector).forEach((function(e){return e.addEventListener("input",(function(){t._toggleInputError(e),t.setButtonState()}))}))}},{key:"setButtonState",value:function(){this._getInputStatus(this._inputList)?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._options.activeButtonClass)):(this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.add(this._options.activeButtonClass))}},{key:"_getInputStatus",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleInputError",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.name,"-input-error"));e.textContent=t.validationMessage,e.classList.add(this._options.errorClass),t.classList.add(this._options.inputErrorBorder)}},{key:"_hideInputError",value:function(t){this._formElement.querySelector(".".concat(t.name,"-input-error")).classList.remove(this._options.errorClass),t.classList.remove(this._options.inputErrorBorder)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new Q(u,p),Y=new Q(u,y),Z=new Q(u,m),tt=new E({nameSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"}),et=new n("https://mesto.nomoreparties.co/v1/cohort-63","bfea2fb3-1d49-4e0a-bbc4-333aa2efb088");Promise.all([et.getUser(),et.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];tt.setUserInfo(o),nt.renderItems(i)})).catch((function(t){return console.log(t)}));var nt=new g({renderer:function(t,e){t.append(rt(e))}},".elements");function rt(t){return new b(t,tt.getUserInfo(),r,(function(t){var e=t.name,n=t.link;return it.open({name:e,link:n})}),(function(t,e){ct.open(t,e)}),(function(t,e,n){t.target.classList.contains("element__fav_active")?et.removeLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})):et.addLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})),t.target.classList.toggle("element__fav_active")})).generateCard()}c.addEventListener("mousedown",(function(){var t=tt.getUserInfo(),e=t.name,n=t.about;l.value=e,s.value=n,X.setButtonState(),ut.open()}));var ot=new z(".popup_type_place",(function(t){var e=t.placeName,n=t.placeImage;ot.renderLoading(!0),et.addCard({name:e,link:n}).then((function(t){nt.addItem(rt(t)),ot.close()})).catch((function(t){return console.log(t)})).finally((function(){ot.renderLoading(!1)}))})),it=new q(".popup_type_image"),ut=new z(".popup_type_profile",(function(t){var e=t.name,n=t.about;ut.renderLoading(!0),et.editUser({name:e,about:n}).then((function(t){tt.setUserInfo(t),ut.close()})).catch((function(t){return console.log(t)})).finally((function(){ut.renderLoading(!1)}))})),at=new z(".popup_type_avatar",(function(t){at.renderLoading(!0),et.editUserAvatar(t).then((function(){tt.setUserInfo(t),at.close()})).catch((function(t){return console.log(t)})).finally((function(){at.renderLoading(!1)}))})),ct=new F(".popup_type_confirm",(function(t,e){et.removeCard(t).then((function(){e.remove(),e=null,ct.close()})).catch((function(t){return console.log(t)}))}));f.addEventListener("click",(function(){return ot.open()})),a.addEventListener("mousedown",(function(){return at.open()})),ut.setEventListeners(),ot.setEventListeners(),it.setEventListeners(),at.setEventListeners(),X.enableValidation(),Y.enableValidation(),Z.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxFQUE2QmtDLGlCQUFpQixTQUFTLGtCQUNyRDZILEdBQW1CVCxNQUFNLElBRTNCNUosRUFBaUJ3QyxpQkFBaUIsYUFBYSxrQkFBTXVJLEdBQW1CbkIsTUFBTSxJQUM5RVEsR0FBa0JjLG9CQUNsQmIsR0FBbUJhLG9CQUNuQnZCLEdBQWV1QixvQkFDZkgsR0FBbUJHLG9CQUVuQjNDLEVBQXNCNEMsbUJBQ3RCM0MsRUFBb0IyQyxtQkFDcEIxQyxFQUFxQjBDLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjaXRvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmwsIHRva2VuKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XHJcbiAgfVxyXG5cclxuICBfZ2V0UmVzdWx0KHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICAgICAgXHJcbiAgfVxyXG5cclxuICBlZGl0VXNlcih7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzdWx0KHJlcykpXHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckF2YXRhcihhdmF0YXJPYmopIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhck9iaiksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIGdldENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gICAgICBcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfcGxhY2UnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfcHJvZmlsZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhJbWFnZVNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2ltYWdlJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwTmV3QXZhdGFyU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfYXZhdGFyJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybVNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2NvbmZpcm0nO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gJy5wcm9maWxlX19uYW1lJztcclxuZXhwb3J0IGNvbnN0IHVzZXJKb2IgPSAnLnByb2ZpbGVfX29jY3VwYXRpb24nO1xyXG5leHBvcnQgY29uc3QgdXNlckF2YXRhciA9ICcucHJvZmlsZV9fYXZhdGFyJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gJy5lbGVtZW50cyc7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c1RlbXBsYXRlID0gJy5lbGVtZW50c19fdGVtcGxhdGUnO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudFNlbGVjdG9yID0gJy5lbGVtZW50JztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRJbWFnZVNlbGVjdG9yID0gJy5lbGVtZW50X19pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50Q2FwdGlvblNlbGVjdG9yID0gJy5lbGVtZW50X190ZXh0J1xyXG5leHBvcnQgY29uc3QgZWxlbWVudExpa2VDb3VudGVyID0gJy5lbGVtZW50X19mYXYtY291bnRlcidcclxuZXhwb3J0IGNvbnN0IHJlbW92ZUJ1dHRvblNlbGVjdG9yID0gJy5lbGVtZW50X19iaW4nO1xyXG5leHBvcnQgY29uc3QgZmF2QnV0dG9uU2VsZWN0b3IgPSAnLmVsZW1lbnRfX2Zhdic7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbiAgaW5wdXRFcnJvckJvcmRlcjogXCJmb3JtX19pbnB1dF9lcnJvclwiLFxyXG59XHJcblxyXG4vLyDQmtC90L7Qv9C60LAg0LjQt9C80LXQvdC10L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmV4cG9ydCBjb25zdCBlZHRpQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1jb250YWluZXInKVxyXG4vLyDQmtC90L7Qv9C60LAg0Lgg0YTQvtGA0LzQsCDQv9C+0L/QsNC/INC/0YDQvtGE0LjQu9GPXHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhVc2VySW5mb09wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICcucHJvZmlsZV9fYnV0dG9uLWNoYW5nZSdcclxuKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TGlzdFNlbGVjdG9yID0gJy5mb3JtX19pbnB1dCc7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX29jY3VwYXRpb24nKTtcclxuLy8g0JrQvdC+0L/QutCwINC4INC40L3Qv9GD0YLRiyDQv9C+0L/QsNC/INC90L7QstC+0LUg0LzQtdGB0YLQvlxyXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoUGxhY2VJbmZvT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgJy5wcm9maWxlX19idXR0b24tYWRkJ1xyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZVNlbGVjdG9yID0gJy5wb3B1cF9faW1hZ2UnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZUNhcHRpb25TZWxlY3RvciA9Jy5wb3B1cF9faW1hZ2UtY2FwdGlvbic7XHJcbmV4cG9ydCBjb25zdCBmb3JtU2VsZWN0b3IgPSAnLmZvcm0nO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtJ107XHJcbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncGxhY2UtZm9ybSddO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zWydhdmF0YXItZm9ybSddXHJcbiIsImltcG9ydCB7XHJcbiAgZWxlbWVudENhcHRpb25TZWxlY3RvcixcclxuICBlbGVtZW50SW1hZ2VTZWxlY3RvcixcclxuICBlbGVtZW50U2VsZWN0b3IsXHJcbiAgZWxlbWVudExpa2VDb3VudGVyLFxyXG4gIGZhdkJ1dHRvblNlbGVjdG9yLFxyXG4gIHJlbW92ZUJ1dHRvblNlbGVjdG9yLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY3VycmVudFVzZXIsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgb3BlbkltYWdlUG9wdXAsXHJcbiAgICBvcGVuQ29uZmlybVBvcHVwLFxyXG4gICAgbGlrZUhhbmRsZXJcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZUhhbmRsZXIgPSBsaWtlSGFuZGxlcjtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fb3BlbkltYWdlUG9wdXAgPSBvcGVuSW1hZ2VQb3B1cDtcclxuICAgIHRoaXMuX29wZW5Db25maXJtUG9wdXAgPSBvcGVuQ29uZmlybVBvcHVwO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudEltYWdlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50TGlrZUNvdW50ZXIpO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENhcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9yZW1vdmVJY29uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19iaW4nKTtcclxuICAgIHRoaXMuX2ZhdkJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGZhdkJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRTZWxlY3RvcilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihyZW1vdmVCdXR0b25TZWxlY3RvcilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuICAgICAgICB0aGlzLl9vcGVuQ29uZmlybVBvcHVwKHRoaXMuX2NhcmRJZCwgdGhpcy5lbGVtZW50KVxyXG4gICAgICApO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGZhdkJ1dHRvblNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PlxyXG4gICAgICAgIHRoaXMuX2xpa2VIYW5kbGVyKGV2dCwgdGhpcy5fY2FyZElkLCB0aGlzLl9saWtlQ291bnRlcilcclxuICAgICAgKTtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihlbGVtZW50SW1hZ2VTZWxlY3RvcilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX29wZW5JbWFnZVBvcHVwKHsgbmFtZTogZXZ0LnRhcmdldC5hbHQsIGxpbms6IGV2dC50YXJnZXQuc3JjIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRVc2VyLmlkID09PSB0aGlzLl9vd25lcklkKSB7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLl9saWtlcy5maW5kKChlbCkgPT4gZWwuX2lkID09PSB0aGlzLl9jdXJyZW50VXNlci5pZCkpIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9mYXZCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fZmF2X2FjdGl2ZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIodGhpcy5fY29udGFpbmVyLCBpdGVtKVxyXG4gICAgfSk7XHJcbiAgICAgICBcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCl7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIHRoaXMudXNlciA9IHt9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlcikge1xyXG4gICAgaWYgKHVzZXIubmFtZSkge1xyXG4gICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gICAgICB0aGlzLnVzZXIubmFtZSA9IHVzZXIubmFtZTtcclxuICAgIH1cclxuICAgIGlmICh1c2VyLmFib3V0KSB7XHJcbiAgICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICAgICAgdGhpcy51c2VyLmFib3V0ID0gdXNlci5hYm91dDtcclxuICAgIH1cclxuICAgIGlmICh1c2VyLl9pZCkge1xyXG4gICAgICB0aGlzLl9pZCA9IHVzZXIuX2lkO1xyXG4gICAgICB0aGlzLnVzZXIuaWQgPSB1c2VyLl9pZDtcclxuICAgIH1cclxuICAgIGlmICh1c2VyLmF2YXRhcikge1xyXG4gICAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlci5hdmF0YXI7XHJcbiAgICAgIHRoaXMudXNlci5hdmF0YXIgPSB1c2VyLmF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlcjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwe1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIG9wZW4oKXtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIilcclxuICB9XHJcblxyXG4gIGNsb3NlKCl7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KT0+e1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1pY29uJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG4gIH1cclxufSIsImltcG9ydCB7IHBvcHVwSW1hZ2VTZWxlY3RvciwgcG9wdXBJbWFnZUNhcHRpb25TZWxlY3RvciB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHBvcHVwSW1hZ2VTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZUNhcHRpb25TZWxlY3RvcilcclxuICB9XHJcblxyXG4gIG9wZW4oe25hbWUsIGxpbmt9KXtcclxuICAgIHN1cGVyLm9wZW4oKVxyXG4gICAgY29uc29sZS5sb2codGhpcy5fcG9wdXApXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgZm9ybVNlbGVjdG9yLCBpbnB1dExpc3RTZWxlY3RvciwgY29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRMaXN0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpXHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcclxuICAgICAgYWNjW2N1ci5uYW1lXSA9IGN1ci52YWx1ZTtcclxuICAgICAgcmV0dXJuIGFjYztcclxuICAgIH0sIHt9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKXtcclxuICAgIGlmKGlzTG9hZGluZyl7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcclxuICAgIH1lbHNlIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwJztcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdFxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkSWQsIGVsZW1lbnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb3B0aW9ucy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xyXG5cclxuICAgIC8v0KHQsdGA0L7RgSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4LCDQv9C+0YHQu9C1INGB0LDQsdC80LjRgtCwXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiB0aGlzLnNldEJ1dHRvblN0YXRlKCksXHJcbiAgICAgICAgMFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/Qn9GA0L7QstC10YDQutCwINCy0YHQtdGFINC40L3Qv9GD0YLQvtCyINC4INGD0YHRgtCw0L3QvtCy0LrQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vcHRpb25zLmlucHV0U2VsZWN0b3IpXHJcbiAgICAgIC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9nZXRJbnB1dFN0YXR1cyh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/Qv9GA0L7QstC10YDQutCwINCy0YHQtdGFINC40L3Qv9GD0YLQvtCyINGE0L7RgNC80YtcclxuICBfZ2V0SW5wdXRTdGF0dXMoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgLy/Qo9GB0YLQsNC90L7QstC60LBcXNGD0LTQsNC70LXQvdC40LUg0L/QvtC70Y8g0YEg0L7RiNC40LHQutC+0LlcclxuICBfdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICAgPyB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgIDogdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8v0JLRi9Cx0L7RgCDQvdGD0LbQvdC+0LPQviBzcGFuINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50Lm5hbWV9LWlucHV0LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5pbnB1dEVycm9yQm9yZGVyKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQubmFtZX0taW5wdXQtZXJyb3JgXHJcbiAgICApO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckJvcmRlcik7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjaXRvbi5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyc7XHJcbmltcG9ydCB7XHJcbiAgZWxlbWVudHNDb250YWluZXIsXHJcbiAgZWxlbWVudHNUZW1wbGF0ZSxcclxuICBqb2JJbnB1dCxcclxuICBuYW1lSW5wdXQsXHJcbiAgcGxhY2VGb3JtLFxyXG4gIGF2YXRhckZvcm0sXHJcbiAgcG9wdXBXaXRoSW1hZ2VTZWxlY3RvcixcclxuICBwb3B1cFBsYWNlU2VsZWN0b3IsXHJcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXHJcbiAgcG9wdXBOZXdBdmF0YXJTZWxlY3RvcixcclxuICBwb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uLFxyXG4gIHBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbixcclxuICBwcm9maWxlRm9ybSxcclxuICB1c2VySm9iLFxyXG4gIHVzZXJOYW1lLFxyXG4gIHVzZXJBdmF0YXIsXHJcbiAgcG9wdXBDb25maXJtU2VsZWN0b3IsXHJcbiAgZWR0aUF2YXRhckJ1dHRvbixcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgJy4uLy4uL3BhZ2VzL2luZGV4LmNzcyc7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBwcm9maWxlRm9ybSk7XHJcbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBwbGFjZUZvcm0pO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIGF2YXRhckZvcm0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogdXNlck5hbWUsXHJcbiAgam9iU2VsZWN0b3I6IHVzZXJKb2IsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IHVzZXJBdmF0YXIsXHJcbn0pO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShcclxuICAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MycsXHJcbiAgJ2JmZWEyZmIzLTFkNDktNGUwYS1iYmM0LTMzM2FhMmVmYjA4OCdcclxuKTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlcigpLCBhcGkuZ2V0Q2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyLCBjYXJkc10pID0+IHtcclxuICAgIC8vINCX0LDQv9C+0LvQvdC10L3QuNC1INC/0YDQvtGE0LjQu9GPXHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyKTtcclxuICAgIC8v0KDQtdC90LTQtdGAINC60LDRgNGC0L7Rh9C10LpcclxuICAgIHBsYWNlTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG5jb25zdCBwbGFjZUxpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNvbnRhaW5lciwgcGxhY2UpID0+IHtcclxuICAgICAgY29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKHBsYWNlKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZWxlbWVudHNDb250YWluZXJcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQocGxhY2UpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBwbGFjZSxcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCksXHJcbiAgICBlbGVtZW50c1RlbXBsYXRlLFxyXG4gICAgKHsgbmFtZSwgbGluayB9KSA9PiBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgbmFtZSwgbGluayB9KSxcclxuICAgIC8vINCf0LXRgNC10LTQsNGH0LAg0LTQsNC90L3Ri9GFINC+INC60LDRgNGC0L7Rh9C60LUg0Lgg0Y3Qu9C10LzQtdC90YLQtSDQutCw0YDRgtC+0YfQutC4INCyINC/0L7Qv9Cw0L9cclxuICAgIChjYXJkSWQsIGVsZW1lbnQpID0+IHtcclxuICAgICAgcG9wdXBXaXRoQ29uZmlybS5vcGVuKGNhcmRJZCwgZWxlbWVudCk7XHJcbiAgICB9LFxyXG4gICAgKGV2dCwgY2FyZElkLCBsaWtlQ291bnRlcikgPT4ge1xyXG4gICAgICBpZiAoIWV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X19mYXZfYWN0aXZlJykpIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5hZGRMaWtlKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xyXG4gICAgICAgICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHVwZGF0ZWRDYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB1cGRhdGVkQ2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICB9XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fZmF2X2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gICkuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmQ7XHJcbn1cclxuXHJcbnBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIGpvYklucHV0LnZhbHVlID0gYWJvdXQ7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgcG9wdXBXaXRoVXNlckluZm8ub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aFBsYWNlSW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwUGxhY2VTZWxlY3RvcixcclxuICAoeyBwbGFjZU5hbWUsIHBsYWNlSW1hZ2UgfSkgPT4ge1xyXG4gICAgLy8g0KHQvtGF0YDQsNC90LXQvdC40LUuLi4uXHJcbiAgICBwb3B1cFdpdGhQbGFjZUluZm8ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZCh7XHJcbiAgICAgICAgbmFtZTogcGxhY2VOYW1lLFxyXG4gICAgICAgIGxpbms6IHBsYWNlSW1hZ2UsXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChwbGFjZSkgPT4ge1xyXG4gICAgICAgIHBsYWNlTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQocGxhY2UpKTtcclxuICAgICAgICBwb3B1cFdpdGhQbGFjZUluZm8uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhQbGFjZUluZm8ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwV2l0aEltYWdlU2VsZWN0b3IpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoVXNlckluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcixcclxuICAoeyBuYW1lLCBhYm91dCB9KSA9PiB7XHJcbiAgICBwb3B1cFdpdGhVc2VySW5mby5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5lZGl0VXNlcih7IG5hbWUsIGFib3V0IH0pXHJcbiAgICAgIC50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XHJcbiAgICAgICAgcG9wdXBXaXRoVXNlckluZm8uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhVc2VySW5mby5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoTmV3QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBOZXdBdmF0YXJTZWxlY3RvcixcclxuICAoYXZhdGFyT2JqKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhOZXdBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFVzZXJBdmF0YXIoYXZhdGFyT2JqKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oYXZhdGFyT2JqKTtcclxuICAgICAgICBwb3B1cFdpdGhOZXdBdmF0YXIuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhOZXdBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuY29uc3QgcG9wdXBXaXRoQ29uZmlybSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXHJcbiAgcG9wdXBDb25maXJtU2VsZWN0b3IsXHJcbiAgKGNhcmRJZCwgZWxlbWVudCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgZWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG4pO1xyXG5wb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuICBwb3B1cFdpdGhQbGFjZUluZm8ub3BlbigpXHJcbik7XHJcbmVkdGlBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4gcG9wdXBXaXRoTmV3QXZhdGFyLm9wZW4oKSk7XHJcbnBvcHVwV2l0aFVzZXJJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aFBsYWNlSW5mby5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhOZXdBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy/QktCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LxcclxucHJvZmlsZUZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucGxhY2VGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbIkFwaSIsImJhc2VVcmwiLCJ0b2tlbiIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsIl90b2tlbiIsImtleSIsInZhbHVlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImNvbmNhdCIsInN0YXR1cyIsIl90aGlzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJfZ2V0UmVzdWx0IiwiX3JlZiIsIl90aGlzMiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyT2JqIiwiX3RoaXMzIiwiX3RoaXM0IiwiX3JlZjIiLCJfdGhpczUiLCJsaW5rIiwiY2FyZElkIiwiX3RoaXM2IiwiX3RoaXM3IiwiX3RoaXM4IiwiZWxlbWVudHNUZW1wbGF0ZSIsImVsZW1lbnRJbWFnZVNlbGVjdG9yIiwiZmF2QnV0dG9uU2VsZWN0b3IiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJhY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQm9yZGVyIiwiZWR0aUF2YXRhckJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicG9wdXBXaXRoUGxhY2VJbmZvT3BlbkJ1dHRvbiIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwbGFjZUZvcm0iLCJhdmF0YXJGb3JtIiwiQ2FyZCIsImRhdGEiLCJjdXJyZW50VXNlciIsInRlbXBsYXRlU2VsZWN0b3IiLCJvcGVuSW1hZ2VQb3B1cCIsIm9wZW5Db25maXJtUG9wdXAiLCJsaWtlSGFuZGxlciIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlSGFuZGxlciIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2N1cnJlbnRVc2VyIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkltYWdlUG9wdXAiLCJfb3BlbkNvbmZpcm1Qb3B1cCIsImVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1hZ2UiLCJfbGlrZUNvdW50ZXIiLCJfaW1hZ2VDYXB0aW9uIiwiX3JlbW92ZUljb24iLCJfZmF2QnV0dG9uIiwiY29udGVudCIsImNsb25lTm9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJhbHQiLCJzcmMiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImZpbmQiLCJlbCIsInRvZ2dsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsInByZXBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfYWJvdXQiLCJfYXZhdGFyIiwidXNlciIsImF2YXRhciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfcG9wdXAiLCJhZGQiLCJjb250YWlucyIsImNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZUNhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY29uc29sZSIsImxvZyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInJlZHVjZSIsImFjYyIsImN1ciIsImlzTG9hZGluZyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVTdWJtaXQiLCJfYnV0dG9uIiwiX2hhbmRsZVN1Ym1pdCIsIl9lbGVtZW50IiwiRm9ybVZhbGlkYXRpb24iLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfb3B0aW9ucyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50Iiwic2V0VGltZW91dCIsInNldEJ1dHRvblN0YXRlIiwiaW5wdXRFbGVtZW50IiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJfZ2V0SW5wdXRTdGF0dXMiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dExpc3QiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJwcm9maWxlRm9ybVZhbGlkYXRpb24iLCJwbGFjZUZvcm1WYWxpZGF0aW9uIiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJ1c2VySW5mbyIsImFwaSIsImFsbCIsImdldFVzZXIiLCJnZXRDYXJkcyIsImNhcmRzIiwic2V0VXNlckluZm8iLCJwbGFjZUxpc3QiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwiY29udGFpbmVyIiwicGxhY2UiLCJhcHBlbmQiLCJjcmVhdGVDYXJkIiwiZ2V0VXNlckluZm8iLCJfcmVmMyIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInBvcHVwV2l0aENvbmZpcm0iLCJsaWtlQ291bnRlciIsInJlbW92ZUxpa2UiLCJ1cGRhdGVkQ2FyZCIsImFkZExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJwb3B1cFdpdGhVc2VySW5mbyIsInBvcHVwV2l0aFBsYWNlSW5mbyIsIl9yZWY0IiwicGxhY2VOYW1lIiwicGxhY2VJbWFnZSIsInJlbmRlckxvYWRpbmciLCJhZGRDYXJkIiwiYWRkSXRlbSIsImZpbmFsbHkiLCJfcmVmNSIsImVkaXRVc2VyIiwicG9wdXBXaXRoTmV3QXZhdGFyIiwiZWRpdFVzZXJBdmF0YXIiLCJyZW1vdmVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==