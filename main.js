(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl="https://mesto.nomoreparties.co/v1/cohort-63",this._token="bfea2fb3-1d49-4e0a-bbc4-333aa2efb088"}var n,r;return n=t,(r=[{key:"getUser",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"editUser",value:function(t){var e=t.name,n=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"addCard",value:function(t){var e=t.name,n=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"removeCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))}},{key:"addLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}},{key:"removeLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).catch((function(t){return console.log(t)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=".elements__template",o=".element__image",i=".element__fav",u=document.querySelector(".profile__avatar-container"),a=document.querySelector(".profile__button-change"),c=document.querySelector(".form__input_type_name"),s=document.querySelector(".form__input_type_occupation"),l=document.querySelector(".profile__button-add"),f=document.querySelector(".popup__image"),p=document.querySelector(".popup__image-caption"),y=document.forms["profile-form"],m=document.forms["place-form"],b=document.forms["avatar-form"];function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var d=function(){function t(e,n,r,u,a,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._likeHandler=c,this._cardId=e._id,this._ownerId=e.owner._id,this._getCurrentUser=n,this._templateSelector=r,this._openImagePopup=u,this._openConfirmPopup=a,this.element=this._getTemplate(),this._image=this.element.querySelector(o),this._likeCounter=this.element.querySelector(".element__fav-counter"),this._imageCaption=this.element.querySelector(".element__text"),this._removeIcon=this.element.querySelector(".element__bin"),this._favButton=this.element.querySelector(i)}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this.element.querySelector(".element__bin").addEventListener("click",(function(){return t._openConfirmPopup(t._cardId,t.element)})),this.element.querySelector(i).addEventListener("click",(function(e){return t._likeHandler(e,t._cardId,t._likeCounter)})),this.element.querySelector(o).addEventListener("click",(function(e){t._openImagePopup({name:e.target.alt,link:e.target.src})}))}},{key:"generateCard",value:function(){var t=this;return this._getCurrentUser.then((function(e){e._id===t._ownerId&&t._removeIcon.classList.remove("disabled"),t._likes.find((function(t){return t._id===e._id}))&&t._favButton.classList.toggle("element__fav_active")})),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._imageCaption.textContent=this._name,this._likeCounter.textContent=this._likes.length,this.element}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var S=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._items.then((function(e){e.forEach((function(e){t._renderer(e)}))}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var E=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o),this.user={}}var e,n;return e=t,(n=[{key:"setUserInfo",value:function(t){this._name.textContent=t.name,this._about.textContent=t.about,this._avatar.src=t.avatar,this._id=t._id}},{key:"getUserInfo",value:function(t){return this.user.name=t.name,this.user.about=t.about,this.user.avatar=t.avatar,this.user.id=t._id,this.user}},{key:"editUserInfo",value:function(t){var e=t.name,n=t.about;this._name.textContent=e,this._about.textContent=n}},{key:"editUserAvatar",value:function(t){var e=t.avatar;this._avatar.src=e}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===j(e)?e:String(e)}var L=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&(window.removeEventListener("keydown",i._handleEscClose),i._popup.classList.remove("popup_opened"))},(r=O(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){window.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){window.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-icon"))&&t.close()})),window.addEventListener("keydown",this._handleEscClose)}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(r);if(o){var n=U(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;I(U(u.prototype),"open",this).call(this),f.src=n,f.alt=e,p.textContent=e}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},A.apply(this,arguments)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(r);if(o){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleSubmitForm=e,n._form=n._popup.querySelector(".form"),n._inputList=Array.from(n._form.querySelectorAll(".form__input")),n._submitButton=n._form.querySelector(".form__submit-button"),n}return e=u,(n=[{key:"_getInputValues",value:function(){return this._inputList.reduce((function(t,e){return t[e.name]=e.value,t}),{})}},{key:"renderLoading",value:function(t){t?(console.log(this._submitButton.textContent),this._submitButton.textContent="Сохранение..."):this._submitButton.textContent="Сохранить"}},{key:"setEventListeners",value:function(){var t=this;A(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){A(z(u.prototype),"close",this).call(this),this._form.reset()}},{key:"open",value:function(){A(z(u.prototype),"open",this).call(this)}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===N(o)?o:String(o)),r)}var o}var F=function(){function t(e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._formElement=n,this._inputList=function(t){if(Array.isArray(t))return H(t)}(r=this._formElement.querySelectorAll(this._options.inputSelector))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._formElement.addEventListener("submit",(function(t){return t.preventDefault()})),this._formElement.addEventListener("reset",(function(){setTimeout((function(){return t.setButtonState()}),0)})),this._formElement.querySelectorAll(this._options.inputSelector).forEach((function(e){return e.addEventListener("input",(function(){t._toggleInputError(e),t.setButtonState()}))}))}},{key:"setButtonState",value:function(){this._getInputStatus(this._inputList)?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._options.activeButtonClass)):(this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.add(this._options.activeButtonClass))}},{key:"_getInputStatus",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleInputError",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.name,"-input-error"));e.textContent=t.validationMessage,e.classList.add(this._options.errorClass),t.classList.add(this._options.inputErrorBorder)}},{key:"_hideInputError",value:function(t){this._formElement.querySelector(".".concat(t.name,"-input-error")).classList.remove(this._options.errorClass),t.classList.remove(this._options.inputErrorBorder)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const M={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",activeButtonClass:"form__submit-button_active",inputErrorClass:"form__input-error",errorClass:"form__input-error_visible",inputErrorBorder:"form__input_error"};function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},K.apply(this,arguments)}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(r);if(o){var n=W(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._button=n._popup.querySelector(".form__submit-button"),n._handleSubmit=e,n}return e=u,(n=[{key:"_setEventListeners",value:function(){var t=this;K(W(u.prototype),"setEventListeners",this).call(this),this._button.addEventListener("mousedown",(function(e){e.preventDefault(),t._handleSubmit(t._cardId,t._element)}))}},{key:"close",value:function(){K(W(u.prototype),"close",this).call(this)}},{key:"open",value:function(t,e){K(W(u.prototype),"open",this).call(this),this._cardId=t,this._element=e,this._setEventListeners()}}])&&G(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(L),Y=new F(M,y),Z=new F(M,m),tt=new F(M,b),et=new E({nameSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"}),nt=new n("https://mesto.nomoreparties.co/v1/","bfea2fb3-1d49-4e0a-bbc4-333aa2efb088");function rt(t){return new d(t,nt.getUser(),r,(function(t){var e=t.name,n=t.link;return it.open({name:e,link:n})}),(function(t,e){st.open(t,e)}),(function(t,e,n){t.target.classList.contains("element__fav_active")?nt.removeLike(e).then((function(t){n.textContent=t.likes.length})):nt.addLike(e).then((function(t){n.textContent=t.likes.length})),t.target.classList.toggle("element__fav_active")})).generateCard()}nt.getUser().then((function(t){return et.setUserInfo(t)}));var ot=new S({items:nt.getCards(),renderer:function(t){ot.addItem(rt(t))}},".elements"),it=new R(".popup_type_image"),ut=new V(".popup_type_profile",(function(t){var e=t.name,n=t.about;ut.renderLoading(!0),nt.editUser({name:e,about:n}).then((function(t){et.editUserInfo(t)})).finally((function(){ut.close(),ut.renderLoading(!1)}))})),at=new V(".popup_type_place",(function(t){var e=t.placeName,n=t.placeImage;at.renderLoading(!0),nt.addCard({name:e,link:n}).then((function(t){ot.addItem(rt(t))})).finally((function(){at.renderLoading(!1),at.close()}))})),ct=new V(".popup_type_avatar",(function(t){nt.editUserAvatar(t).then((function(){ct.renderLoading(!0),et.editUserAvatar(t)})).finally((function(){ct.renderLoading(!1),ct.close()}))})),st=new X(".popup_type_confirm",(function(t,e){nt.removeCard(t).then((function(){e.remove(),e=null,st.close()}))}));ot.renderItems(),a.addEventListener("mousedown",(function(){nt.getUser().then((function(t){var e=et.getUserInfo(t),n=e.name,r=e.about;c.value=n,s.value=r,Y.setButtonState(),ut.open()}))})),l.addEventListener("click",(function(){return at.open()})),u.addEventListener("mousedown",(function(){return ct.open()})),ut.setEventListeners(),at.setEventListeners(),it.setEventListeners(),ct.setEventListeners(),Y.enableValidation(),Z.enableValidation(),tt.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUFTMkIsZUFBZXRMLEVBQzFCLElBQ0NnTCxTQUFRLFdBQ1BLLEdBQW1CUixlQUFjLEdBQ2pDUSxHQUFtQnpGLE9BQ3JCLEdBQ0YsSUFHSXNFLEdBQW1CLElBQUloQixFVnJJTyx1QlV1SWxDLFNBQUMvSSxFQUFRcUMsR0FDUG9ILEdBQUkyQixXQUFXcEwsR0FBUXJCLE1BQUssV0FDMUIwRCxFQUFRa0IsU0FDUmxCLEVBQVUsS0FDVjBILEdBQWlCdEUsT0FDbkIsR0FDRixJQUdGNkUsR0FBVWUsY0FFVjlLLEVBQTRCd0MsaUJBQWlCLGFBQWEsV0FDeEQwRyxHQUFJRyxVQUFVakwsTUFBSyxTQUFDMEUsR0FDbEIsSUFBQWlJLEVBQXdCOUIsR0FBUytCLFlBQVlsSSxHQUFyQzlELEVBQUkrTCxFQUFKL0wsS0FBTUMsRUFBSzhMLEVBQUw5TCxNQUNkZ0IsRUFBVWxDLE1BQVFpQixFQUNsQmtCLEVBQVNuQyxNQUFRa0IsRUFDakI0SixFQUFzQnpCLGlCQUN0QjhDLEdBQWtCWCxNQUNwQixHQUNGLElBRUFwSixFQUE2QnFDLGlCQUFpQixTQUFTLGtCQUNyRCtILEdBQW1CaEIsTUFBTSxJQUczQjFKLEVBQWlCMkMsaUJBQWlCLGFBQWEsa0JBQU1tSSxHQUFtQnBCLE1BQU0sSUFFOUVXLEdBQWtCZSxvQkFDbEJWLEdBQW1CVSxvQkFDbkIzQixHQUFlMkIsb0JBQ2ZOLEdBQW1CTSxvQkFHbkJwQyxFQUFzQnFDLG1CQUN0Qm5DLEVBQW9CbUMsbUJBQ3BCbEMsR0FBcUJrQyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY2l0b24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjMnO1xyXG4gICAgdGhpcy5fdG9rZW4gPSAnYmZlYTJmYjMtMWQ0OS00ZTBhLWJiYzQtMzMzYWEyZWZiMDg4JztcclxuICB9XHJcblxyXG4gIGdldFVzZXIoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckF2YXRhcihhdmF0YXJPYmopIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhck9iailcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wbGFjZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wcm9maWxlJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cE5ld0F2YXRhclNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2F2YXRhcic7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm1TZWxlY3RvciA9ICcucG9wdXBfdHlwZV9jb25maXJtJztcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9ICcucHJvZmlsZV9fbmFtZSc7XHJcbmV4cG9ydCBjb25zdCB1c2VySm9iID0gJy5wcm9maWxlX19vY2N1cGF0aW9uJztcclxuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXIgPSAnLnByb2ZpbGVfX2F2YXRhcidcclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c0NvbnRhaW5lciA9ICcuZWxlbWVudHMnO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudHNUZW1wbGF0ZSA9ICcuZWxlbWVudHNfX3RlbXBsYXRlJztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRTZWxlY3RvciA9ICcuZWxlbWVudCc7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50SW1hZ2VTZWxlY3RvciA9ICcuZWxlbWVudF9faW1hZ2UnO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudENhcHRpb25TZWxlY3RvciA9ICcuZWxlbWVudF9fdGV4dCdcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRMaWtlQ291bnRlciA9ICcuZWxlbWVudF9fZmF2LWNvdW50ZXInXHJcbmV4cG9ydCBjb25zdCByZW1vdmVCdXR0b25TZWxlY3RvciA9ICcuZWxlbWVudF9fYmluJztcclxuZXhwb3J0IGNvbnN0IGZhdkJ1dHRvblNlbGVjdG9yID0gJy5lbGVtZW50X19mYXYnO1xyXG5cclxuLy8g0JrQvdC+0L/QutCwINC40LfQvNC10L3QtdC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG5leHBvcnQgY29uc3QgZWR0aUF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItY29udGFpbmVyJylcclxuLy8g0JrQvdC+0L/QutCwINC4INGE0L7RgNC80LAg0L/QvtC/0LDQvyDQv9GA0L7RhNC40LvRj1xyXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnLnByb2ZpbGVfX2J1dHRvbi1jaGFuZ2UnXHJcbik7XHJcbmV4cG9ydCBjb25zdCBpbnB1dExpc3RTZWxlY3RvciA9ICcuZm9ybV9faW5wdXQnO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9vY2N1cGF0aW9uJyk7XHJcbi8vINCa0L3QvtC/0LrQsCDQuCDQuNC90L/Rg9GC0Ysg0L/QvtC/0LDQvyDQvdC+0LLQvtC1INC80LXRgdGC0L5cclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICcucHJvZmlsZV9fYnV0dG9uLWFkZCdcclxuKTtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRJbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICcucG9wdXBfX2ltYWdlLWNhcHRpb24nXHJcbik7XHJcbmV4cG9ydCBjb25zdCBmb3JtU2VsZWN0b3IgPSAnLmZvcm0nO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtJ107XHJcbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncGxhY2UtZm9ybSddO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zWydhdmF0YXItZm9ybSddXHJcbiIsImltcG9ydCB7XHJcbiAgZWxlbWVudENhcHRpb25TZWxlY3RvcixcclxuICBlbGVtZW50SW1hZ2VTZWxlY3RvcixcclxuICBlbGVtZW50U2VsZWN0b3IsXHJcbiAgZWxlbWVudExpa2VDb3VudGVyLFxyXG4gIGZhdkJ1dHRvblNlbGVjdG9yLFxyXG4gIHJlbW92ZUJ1dHRvblNlbGVjdG9yLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgZ2V0Q3VycmVudFVzZXIsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgb3BlbkltYWdlUG9wdXAsXHJcbiAgICBvcGVuQ29uZmlybVBvcHVwLFxyXG4gICAgbGlrZUhhbmRsZXJcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZUhhbmRsZXIgPSBsaWtlSGFuZGxlcjtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fZ2V0Q3VycmVudFVzZXIgPSBnZXRDdXJyZW50VXNlcjtcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fb3BlbkltYWdlUG9wdXAgPSBvcGVuSW1hZ2VQb3B1cDtcclxuICAgIHRoaXMuX29wZW5Db25maXJtUG9wdXAgPSBvcGVuQ29uZmlybVBvcHVwO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudEltYWdlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50TGlrZUNvdW50ZXIpO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENhcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9yZW1vdmVJY29uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19iaW4nKTtcclxuICAgIHRoaXMuX2ZhdkJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGZhdkJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRTZWxlY3RvcilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihyZW1vdmVCdXR0b25TZWxlY3RvcilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuICAgICAgICB0aGlzLl9vcGVuQ29uZmlybVBvcHVwKHRoaXMuX2NhcmRJZCwgdGhpcy5lbGVtZW50KVxyXG4gICAgICApO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGZhdkJ1dHRvblNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PlxyXG4gICAgICAgIHRoaXMuX2xpa2VIYW5kbGVyKGV2dCwgdGhpcy5fY2FyZElkLCB0aGlzLl9saWtlQ291bnRlcilcclxuICAgICAgKTtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihlbGVtZW50SW1hZ2VTZWxlY3RvcilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX29wZW5JbWFnZVBvcHVwKHsgbmFtZTogZXZ0LnRhcmdldC5hbHQsIGxpbms6IGV2dC50YXJnZXQuc3JjIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2dldEN1cnJlbnRVc2VyLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgaWYgKHVzZXIuX2lkID09PSB0aGlzLl9vd25lcklkKSB7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLl9saWtlcy5maW5kKChlbCkgPT4gZWwuX2lkID09PSB1c2VyLl9pZCkpIHtcclxuICAgICAgICB0aGlzLl9mYXZCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fZmF2X2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICB0aGlzLl9pdGVtcy50aGVuKGl0ZW1zID0+IHtcclxuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXHJcbiAgICB9KTtcclxuICAgfSlcclxuICAgIFxyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KXtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy51c2VyID0ge307XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyKSB7XHJcbiAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXIuYXZhdGFyO1xyXG4gICAgICB0aGlzLl9pZCA9IHVzZXIuX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8odXNlcikge1xyXG4gICAgdGhpcy51c2VyLm5hbWUgPSB1c2VyLm5hbWU7XHJcbiAgICB0aGlzLnVzZXIuYWJvdXQgPSB1c2VyLmFib3V0O1xyXG4gICAgdGhpcy51c2VyLmF2YXRhciA9IHVzZXIuYXZhdGFyO1xyXG4gICAgdGhpcy51c2VyLmlkID0gdXNlci5faWQ7XHJcbiAgICByZXR1cm4gdGhpcy51c2VyO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJBdmF0YXIoe2F2YXRhcn0pIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBvcGVuKCl7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpe1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCk9PntcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtaWNvbicpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBlbGVtZW50SW1hZ2UsIGVsZW1lbnRJbWFnZUNhcHRpb24gfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHtuYW1lLCBsaW5rfSl7XHJcbiAgICBzdXBlci5vcGVuKClcclxuICAgIGVsZW1lbnRJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgZWxlbWVudEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICBlbGVtZW50SW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBmb3JtU2VsZWN0b3IsIGlucHV0TGlzdFNlbGVjdG9yIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRMaXN0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XHJcbiAgICAgIGFjY1tjdXIubmFtZV0gPSBjdXIudmFsdWU7XHJcbiAgICAgIHJldHVybiBhY2M7XHJcbiAgICB9LCB7fSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZyl7XHJcbiAgICBpZihpc0xvYWRpbmcpe1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQpXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcclxuICAgIH1lbHNlIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKXtcclxuICAgIHN1cGVyLm9wZW4oKVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb3B0aW9ucy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xyXG5cclxuICAgIC8v0KHQsdGA0L7RgSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4LCDQv9C+0YHQu9C1INGB0LDQsdC80LjRgtCwXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiB0aGlzLnNldEJ1dHRvblN0YXRlKCksXHJcbiAgICAgICAgMFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/Qn9GA0L7QstC10YDQutCwINCy0YHQtdGFINC40L3Qv9GD0YLQvtCyINC4INGD0YHRgtCw0L3QvtCy0LrQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vcHRpb25zLmlucHV0U2VsZWN0b3IpXHJcbiAgICAgIC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9nZXRJbnB1dFN0YXR1cyh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/Qv9GA0L7QstC10YDQutCwINCy0YHQtdGFINC40L3Qv9GD0YLQvtCyINGE0L7RgNC80YtcclxuICBfZ2V0SW5wdXRTdGF0dXMoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgLy/Qo9GB0YLQsNC90L7QstC60LBcXNGD0LTQsNC70LXQvdC40LUg0L/QvtC70Y8g0YEg0L7RiNC40LHQutC+0LlcclxuICBfdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICAgPyB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgIDogdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8v0JLRi9Cx0L7RgCDQvdGD0LbQvdC+0LPQviBzcGFuINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50Lm5hbWV9LWlucHV0LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5pbnB1dEVycm9yQm9yZGVyKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQubmFtZX0taW5wdXQtZXJyb3JgXHJcbiAgICApO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckJvcmRlcik7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiIGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxuICBpbnB1dEVycm9yQm9yZGVyOiBcImZvcm1fX2lucHV0X2Vycm9yXCIsXHJcbn1cclxuXHJcbiBleHBvcnQgZGVmYXVsdCBjb25maWciLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdFxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkSWQsIGVsZW1lbnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWNpdG9uLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyc7XHJcbmltcG9ydCB7XHJcbiAgZWxlbWVudHNDb250YWluZXIsXHJcbiAgZWxlbWVudHNUZW1wbGF0ZSxcclxuICBqb2JJbnB1dCxcclxuICBuYW1lSW5wdXQsXHJcbiAgcGxhY2VGb3JtLFxyXG4gIGF2YXRhckZvcm0sXHJcbiAgcG9wdXBJbWFnZVNlbGVjdG9yLFxyXG4gIHBvcHVwUGxhY2VTZWxlY3RvcixcclxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcixcclxuICBwb3B1cE5ld0F2YXRhclNlbGVjdG9yLFxyXG4gIHBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24sXHJcbiAgcG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIHVzZXJKb2IsXHJcbiAgdXNlck5hbWUsXHJcbiAgdXNlckF2YXRhcixcclxuICBwb3B1cENvbmZpcm1TZWxlY3RvcixcclxuICBlZHRpQXZhdGFyQnV0dG9uLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qcyc7XHJcbmltcG9ydCAnLi4vLi4vcGFnZXMvaW5kZXguY3NzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoQ29uZmlybWF0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgcHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgcGxhY2VGb3JtKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBhdmF0YXJGb3JtKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IHVzZXJOYW1lLFxyXG4gIGpvYlNlbGVjdG9yOiB1c2VySm9iLFxyXG4gIGF2YXRhclNlbGVjdG9yOiB1c2VyQXZhdGFyLFxyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXHJcbiAgJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS8nLFxyXG4gICdiZmVhMmZiMy0xZDQ5LTRlMGEtYmJjNC0zMzNhYTJlZmIwODgnXHJcbik7XHJcblxyXG5hcGkuZ2V0VXNlcigpLnRoZW4oKHVzZXIpID0+IHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgY29uc29sZS5sb2codGhpcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQocGxhY2UpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBwbGFjZSxcclxuICAgIGFwaS5nZXRVc2VyKCksXHJcbiAgICBlbGVtZW50c1RlbXBsYXRlLFxyXG4gICAgKHsgbmFtZSwgbGluayB9KSA9PiBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgbmFtZSwgbGluayB9KSxcclxuICAgIChjYXJkSWQsIGVsZW1lbnQpID0+IHtcclxuICAgICAgcG9wdXBXaXRoQ29uZmlybS5vcGVuKGNhcmRJZCwgZWxlbWVudCk7XHJcbiAgICB9LFxyXG4gICAgKGV2dCwgY2FyZElkLCBsaWtlQ291bnRlcikgPT4ge1xyXG4gICAgICBpZiAoIWV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X19mYXZfYWN0aXZlJykpIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHVwZGF0ZWRDYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkSWQpLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHVwZGF0ZWRDYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19mYXZfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgKS5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZDtcclxufVxyXG5cclxuY29uc3QgcGxhY2VMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGFwaS5nZXRDYXJkcygpLFxyXG4gICAgcmVuZGVyZXI6IChwbGFjZSkgPT4ge1xyXG4gICAgICBwbGFjZUxpc3QuYWRkSXRlbShjcmVhdGVDYXJkKHBsYWNlKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZWxlbWVudHNDb250YWluZXJcclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2VTZWxlY3Rvcik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhVc2VySW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwUHJvZmlsZVNlbGVjdG9yLFxyXG4gICh7IG5hbWUsIGFib3V0IH0pID0+IHtcclxuICAgIHBvcHVwV2l0aFVzZXJJbmZvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyKHsgbmFtZSwgYWJvdXQgfSlcclxuICAgICAgLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICB1c2VySW5mby5lZGl0VXNlckluZm8odXNlcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhVc2VySW5mby5jbG9zZSgpO1xyXG4gICAgICAgIHBvcHVwV2l0aFVzZXJJbmZvLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhQbGFjZUluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cFBsYWNlU2VsZWN0b3IsXHJcbiAgKHsgcGxhY2VOYW1lLCBwbGFjZUltYWdlIH0pID0+IHtcclxuICAgIHBvcHVwV2l0aFBsYWNlSW5mby5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpLmFkZENhcmQoe1xyXG4gICAgICAgIG5hbWU6IHBsYWNlTmFtZSxcclxuICAgICAgICBsaW5rOiBwbGFjZUltYWdlLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocGxhY2UpID0+IHtcclxuICAgICAgICBwbGFjZUxpc3QuYWRkSXRlbShjcmVhdGVDYXJkKHBsYWNlKSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhQbGFjZUluZm8ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgcG9wdXBXaXRoUGxhY2VJbmZvLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aE5ld0F2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwTmV3QXZhdGFyU2VsZWN0b3IsXHJcbiAgKGF2YXRhck9iaikgPT4ge1xyXG4gICAgYXBpLmVkaXRVc2VyQXZhdGFyKGF2YXRhck9iaikudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwV2l0aE5ld0F2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpXHJcbiAgICAgIHVzZXJJbmZvLmVkaXRVc2VyQXZhdGFyKGF2YXRhck9iaik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCk9PiB7XHJcbiAgICAgIHBvcHVwV2l0aE5ld0F2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKVxyXG4gICAgICBwb3B1cFdpdGhOZXdBdmF0YXIuY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoQ29uZmlybSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXHJcbiAgcG9wdXBDb25maXJtU2VsZWN0b3IsXHJcbiAgKGNhcmRJZCwgZWxlbWVudCkgPT4ge1xyXG4gICAgYXBpLnJlbW92ZUNhcmQoY2FyZElkKS50aGVuKCgpID0+IHtcclxuICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgZWxlbWVudCA9IG51bGw7XHJcbiAgICAgIHBvcHVwV2l0aENvbmZpcm0uY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbnBsYWNlTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxucG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICgpID0+IHtcclxuICBhcGkuZ2V0VXNlcigpLnRoZW4oKHVzZXIpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKHVzZXIpO1xyXG4gICAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICAgIGpvYklucHV0LnZhbHVlID0gYWJvdXQ7XHJcbiAgICBwcm9maWxlRm9ybVZhbGlkYXRpb24uc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgIHBvcHVwV2l0aFVzZXJJbmZvLm9wZW4oKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5wb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuICBwb3B1cFdpdGhQbGFjZUluZm8ub3BlbigpXHJcbik7XHJcblxyXG5lZHRpQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICgpID0+IHBvcHVwV2l0aE5ld0F2YXRhci5vcGVuKCkpO1xyXG5cclxucG9wdXBXaXRoVXNlckluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoUGxhY2VJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aE5ld0F2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy/QktCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LxcclxucHJvZmlsZUZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucGxhY2VGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbIkFwaSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsIl90b2tlbiIsImtleSIsInZhbHVlIiwiZmV0Y2giLCJjb25jYXQiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiX3JlZiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyT2JqIiwiX3JlZjIiLCJsaW5rIiwiY2FyZElkIiwiZWxlbWVudHNUZW1wbGF0ZSIsImVsZW1lbnRJbWFnZVNlbGVjdG9yIiwiZmF2QnV0dG9uU2VsZWN0b3IiLCJlZHRpQXZhdGFyQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uIiwiZWxlbWVudEltYWdlIiwiZWxlbWVudEltYWdlQ2FwdGlvbiIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwbGFjZUZvcm0iLCJhdmF0YXJGb3JtIiwiQ2FyZCIsImRhdGEiLCJnZXRDdXJyZW50VXNlciIsInRlbXBsYXRlU2VsZWN0b3IiLCJvcGVuSW1hZ2VQb3B1cCIsIm9wZW5Db25maXJtUG9wdXAiLCJsaWtlSGFuZGxlciIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlSGFuZGxlciIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2dldEN1cnJlbnRVc2VyIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkltYWdlUG9wdXAiLCJfb3BlbkNvbmZpcm1Qb3B1cCIsImVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1hZ2UiLCJfbGlrZUNvdW50ZXIiLCJfaW1hZ2VDYXB0aW9uIiwiX3JlbW92ZUljb24iLCJfZmF2QnV0dG9uIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImFsdCIsInNyYyIsIl90aGlzMiIsInVzZXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJmaW5kIiwiZWwiLCJ0b2dnbGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2Fib3V0IiwiX2F2YXRhciIsImF2YXRhciIsImlkIiwiX3JlZjMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX3BvcHVwIiwiYWRkIiwiY29udGFpbnMiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiRm9ybVZhbGlkYXRpb24iLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfb3B0aW9ucyIsIl9mb3JtRWxlbWVudCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic2V0VGltZW91dCIsInNldEJ1dHRvblN0YXRlIiwiaW5wdXRFbGVtZW50IiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJfZ2V0SW5wdXRTdGF0dXMiLCJzZXRBdHRyaWJ1dGUiLCJhY3RpdmVCdXR0b25DbGFzcyIsInJlbW92ZUF0dHJpYnV0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQm9yZGVyIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlU3VibWl0IiwiX2J1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJfZWxlbWVudCIsInByb2ZpbGVGb3JtVmFsaWRhdGlvbiIsImNvbmZpZyIsInBsYWNlRm9ybVZhbGlkYXRpb24iLCJhdmF0YXJGb3JtVmFsaWRhdGlvbiIsInVzZXJJbmZvIiwiYXBpIiwiY3JlYXRlQ2FyZCIsInBsYWNlIiwiZ2V0VXNlciIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInBvcHVwV2l0aENvbmZpcm0iLCJsaWtlQ291bnRlciIsInJlbW92ZUxpa2UiLCJ1cGRhdGVkQ2FyZCIsImFkZExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJzZXRVc2VySW5mbyIsInBsYWNlTGlzdCIsImdldENhcmRzIiwiYWRkSXRlbSIsInBvcHVwV2l0aFVzZXJJbmZvIiwicmVuZGVyTG9hZGluZyIsImVkaXRVc2VyIiwiZWRpdFVzZXJJbmZvIiwiZmluYWxseSIsInBvcHVwV2l0aFBsYWNlSW5mbyIsInBsYWNlTmFtZSIsInBsYWNlSW1hZ2UiLCJhZGRDYXJkIiwicG9wdXBXaXRoTmV3QXZhdGFyIiwiZWRpdFVzZXJBdmF0YXIiLCJyZW1vdmVDYXJkIiwicmVuZGVySXRlbXMiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=