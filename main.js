(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e,this._token=n}var n,r;return n=t,(r=[{key:"_getResult",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUser",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"editUser",value:function(t){var e=this,n=t.name,r=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,about:r})}).then((function(t){return e._getResult(t)}))}},{key:"editUserAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return e._getResult(t)}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"addCard",value:function(t){var e=this,n=t.name,r=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,link:r})}).then((function(t){return e._getResult(t)}))}},{key:"removeCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=".elements__template",o=".element__image",i=".element__fav",u={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_active",inputErrorClass:"form__input-error",errorClass:"form__input-error_visible",inputErrorBorder:"form__input_error"},a=document.querySelector(".profile__avatar-container"),c=document.querySelector(".profile__button-change"),l=document.querySelector(".form__input_type_name"),s=document.querySelector(".form__input_type_occupation"),f=document.querySelector(".profile__button-add"),p=document.forms["profile-form"],y=document.forms["place-form"],m=document.forms["avatar-form"];function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var b=function(){function t(e,n,r,u,a,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._likeHandler=c,this._cardId=e._id,this._ownerId=e.owner._id,this._getCurrentUser=n,this._templateSelector=r,this._openImagePopup=u,this._openConfirmPopup=a,this.element=this._getTemplate(),this._image=this.element.querySelector(o),this._likeCounter=this.element.querySelector(".element__fav-counter"),this._imageCaption=this.element.querySelector(".element__text"),this._removeIcon=this.element.querySelector(".element__bin"),this._favButton=this.element.querySelector(i)}var e,n;return e=t,n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this.element.querySelector(".element__bin").addEventListener("click",(function(){return t._openConfirmPopup(t._cardId,t.element)})),this.element.querySelector(i).addEventListener("click",(function(e){return t._likeHandler(e,t._cardId,t._likeCounter)})),this.element.querySelector(o).addEventListener("click",(function(e){t._openImagePopup({name:e.target.alt,link:e.target.src})}))}},{key:"generateCard",value:function(){var t=this;return this._getCurrentUser.then((function(e){e._id===t._ownerId&&t._removeIcon.classList.remove("disabled"),t._likes.find((function(t){return t._id===e._id}))&&t._favButton.classList.toggle("element__fav_active")})),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._imageCaption.textContent=this._name,this._likeCounter.textContent=this._likes.length,this.element}}],n&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._items.then((function(e){e.forEach((function(e){t._renderer(t._container,e)}))}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var E=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o),this.user={}}var e,n;return e=t,n=[{key:"setUserInfo",value:function(t){t.name&&(this._name.textContent=t.name),t.about&&(this._about.textContent=t.about),t._id&&(this._id=t._id),t.avatar&&(this._avatar.src=t.avatar)}},{key:"getUserInfo",value:function(t){return this.user.name=t.name,this.user.about=t.about,this.user.avatar=t.avatar,this.user.id=t._id,this.user}}],n&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var P=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&(window.removeEventListener("keydown",i._handleEscClose),i._popup.classList.remove("popup_opened"))},(r=O(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){window.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){window.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-icon"))&&t.close()})),window.addEventListener("keydown",this._handleEscClose)}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupImageCaption=e._popup.querySelector(".popup__image-caption"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;I(R(u.prototype),"open",this).call(this),console.log(this._popup),this._popupImage.src=n,this._popupImage.alt=e,this._popupImageCaption.textContent=e}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},A.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._handleSubmitForm=e,n._form=n._popup.querySelector(".form"),n._inputList=Array.from(n._form.querySelectorAll(".form__input")),n._submitButton=n._form.querySelector(u.submitButtonSelector),n}return e=a,(n=[{key:"_getInputValues",value:function(){return this._inputList.reduce((function(t,e){return t[e.name]=e.value,t}),{})}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var t=this;A(D(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){A(D(a.prototype),"close",this).call(this),this._form.reset()}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},H.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._button=n._popup.querySelector(u.submitButtonSelector),n._handleSubmit=e,n}return e=a,(n=[{key:"_setEventListeners",value:function(){var t=this;H(F(a.prototype),"setEventListeners",this).call(this),this._button.addEventListener("mousedown",(function(e){e.preventDefault(),t._handleSubmit(t._cardId,t._element)}))}},{key:"open",value:function(t,e){H(F(a.prototype),"open",this).call(this),this._cardId=t,this._element=e,this._setEventListeners()}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._formElement=n,this._inputList=function(t){if(Array.isArray(t))return G(t)}(r=this._formElement.querySelectorAll(this._options.inputSelector))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._formElement.addEventListener("submit",(function(t){return t.preventDefault()})),this._formElement.addEventListener("reset",(function(){setTimeout((function(){return t.setButtonState()}),0)})),this._formElement.querySelectorAll(this._options.inputSelector).forEach((function(e){return e.addEventListener("input",(function(){t._toggleInputError(e),t.setButtonState()}))}))}},{key:"setButtonState",value:function(){this._getInputStatus(this._inputList)?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._options.activeButtonClass)):(this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.add(this._options.activeButtonClass))}},{key:"_getInputStatus",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleInputError",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.name,"-input-error"));e.textContent=t.validationMessage,e.classList.add(this._options.errorClass),t.classList.add(this._options.inputErrorBorder)}},{key:"_hideInputError",value:function(t){this._formElement.querySelector(".".concat(t.name,"-input-error")).classList.remove(this._options.errorClass),t.classList.remove(this._options.inputErrorBorder)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),W=new Q(u,p),X=new Q(u,y),Y=new Q(u,m),Z=new E({nameSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"}),tt=new n("https://mesto.nomoreparties.co/v1/cohort-63","bfea2fb3-1d49-4e0a-bbc4-333aa2efb088"),et=tt.getUser().catch((function(t){return console.log(t)})),nt=tt.getCards().catch((function(t){return console.log(t)}));function rt(t){return new b(t,et,r,(function(t){var e=t.name,n=t.link;return it.open({name:e,link:n})}),(function(t,e){lt.open(t,e)}),(function(t,e,n){t.target.classList.contains("element__fav_active")?tt.removeLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})):tt.addLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})),t.target.classList.toggle("element__fav_active")})).generateCard()}et.then((function(t){return Z.setUserInfo(t)}));var ot=new g({items:nt,renderer:function(t,e){t.append(rt(e))}},".elements"),it=new q(".popup_type_image"),ut=new z(".popup_type_profile",(function(t){var e=t.name,n=t.about;ut.renderLoading(!0),tt.editUser({name:e,about:n}).then((function(t){Z.setUserInfo(t),ut.close()})).catch((function(t){return console.log(t)})).finally((function(){ut.renderLoading(!1)}))})),at=new z(".popup_type_place",(function(t){var e=t.placeName,n=t.placeImage;at.renderLoading(!0),tt.addCard({name:e,link:n}).then((function(t){ot.addItem(rt(t)),at.close()})).catch((function(t){return console.log(t)})).finally((function(){at.renderLoading(!1)}))})),ct=new z(".popup_type_avatar",(function(t){tt.editUserAvatar(t).then((function(){ct.renderLoading(!0),Z.setUserInfo(t),ct.close()})).catch((function(t){return console.log(t)})).finally((function(){ct.renderLoading(!1)}))})),lt=new M(".popup_type_confirm",(function(t,e){tt.removeCard(t).then((function(){e.remove(),e=null,lt.close()})).catch((function(t){return console.log(t)}))}));Promise.all([et,nt]).then((function(){return ot.renderItems()})),c.addEventListener("mousedown",(function(){et.then((function(t){var e=Z.getUserInfo(t),n=e.name,r=e.about;l.value=n,s.value=r,W.setButtonState(),ut.open()})).catch((function(t){return console.log(t)}))})),f.addEventListener("click",(function(){return at.open()})),a.addEventListener("mousedown",(function(){return ct.open()})),ut.setEventListeners(),at.setEventListeners(),it.setEventListeners(),ct.setEventListeners(),W.enableValidation(),X.enableValidation(),Y.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDVCxJQUFBa0ksRUFBd0JwQyxFQUFTcUMsWUFBWW5JLEdBQXJDeEUsRUFBSTBNLEVBQUoxTSxLQUFNQyxFQUFLeU0sRUFBTHpNLE1BQ2Q4QixFQUFVL0MsTUFBUWdCLEVBQ2xCZ0MsRUFBU2hELE1BQVFpQixFQUNqQmtLLEVBQXNCZixpQkFDdEJ1QyxHQUFrQlgsTUFDcEIsSUFDQ1AsT0FBTSxTQUFDQyxHQUFHLE9BQUtwRCxRQUFRQyxJQUFJbUQsRUFBSSxHQUNsQyxJQUVBekksRUFBNkJrQyxpQkFBaUIsU0FBUyxrQkFDckQ0SCxHQUFtQmYsTUFBTSxJQUczQnJKLEVBQWlCd0MsaUJBQWlCLGFBQWEsa0JBQU1rSSxHQUFtQnJCLE1BQU0sSUFFOUVXLEdBQWtCaUIsb0JBQ2xCYixHQUFtQmEsb0JBQ25CN0IsR0FBZTZCLG9CQUNmUCxHQUFtQk8sb0JBR25CekMsRUFBc0IwQyxtQkFDdEJ6QyxFQUFvQnlDLG1CQUNwQnhDLEVBQXFCd0Msa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWNpdG9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoYmFzZVVybCwgdG9rZW4pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICB9XHJcblxyXG4gIF9nZXRSZXN1bHQocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXIoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gICAgICBcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyQXZhdGFyKGF2YXRhck9iaikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyT2JqKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzdWx0KHJlcykpXHJcbiAgICAgIFxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wbGFjZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wcm9maWxlJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfaW1hZ2UnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBOZXdBdmF0YXJTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9hdmF0YXInO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDb25maXJtU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfY29uZmlybSc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlck5hbWUgPSAnLnByb2ZpbGVfX25hbWUnO1xyXG5leHBvcnQgY29uc3QgdXNlckpvYiA9ICcucHJvZmlsZV9fb2NjdXBhdGlvbic7XHJcbmV4cG9ydCBjb25zdCB1c2VyQXZhdGFyID0gJy5wcm9maWxlX19hdmF0YXInXHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudHNDb250YWluZXIgPSAnLmVsZW1lbnRzJztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzVGVtcGxhdGUgPSAnLmVsZW1lbnRzX190ZW1wbGF0ZSc7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50U2VsZWN0b3IgPSAnLmVsZW1lbnQnO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudEltYWdlU2VsZWN0b3IgPSAnLmVsZW1lbnRfX2ltYWdlJztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRDYXB0aW9uU2VsZWN0b3IgPSAnLmVsZW1lbnRfX3RleHQnXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50TGlrZUNvdW50ZXIgPSAnLmVsZW1lbnRfX2Zhdi1jb3VudGVyJ1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlQnV0dG9uU2VsZWN0b3IgPSAnLmVsZW1lbnRfX2Jpbic7XHJcbmV4cG9ydCBjb25zdCBmYXZCdXR0b25TZWxlY3RvciA9ICcuZWxlbWVudF9fZmF2JztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICBhY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxuICBpbnB1dEVycm9yQm9yZGVyOiBcImZvcm1fX2lucHV0X2Vycm9yXCIsXHJcbn1cclxuXHJcbi8vINCa0L3QvtC/0LrQsCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuZXhwb3J0IGNvbnN0IGVkdGlBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lcicpXHJcbi8vINCa0L3QvtC/0LrQsCDQuCDRhNC+0YDQvNCwINC/0L7Qv9Cw0L8g0L/RgNC+0YTQuNC70Y9cclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgJy5wcm9maWxlX19idXR0b24tY2hhbmdlJ1xyXG4pO1xyXG5leHBvcnQgY29uc3QgaW5wdXRMaXN0U2VsZWN0b3IgPSAnLmZvcm1fX2lucHV0JztcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfb2NjdXBhdGlvbicpO1xyXG4vLyDQmtC90L7Qv9C60LAg0Lgg0LjQvdC/0YPRgtGLINC/0L7Qv9Cw0L8g0L3QvtCy0L7QtSDQvNC10YHRgtC+XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnLnByb2ZpbGVfX2J1dHRvbi1hZGQnXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX19pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yID0nLnBvcHVwX19pbWFnZS1jYXB0aW9uJztcclxuZXhwb3J0IGNvbnN0IGZvcm1TZWxlY3RvciA9ICcuZm9ybSc7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydwcm9maWxlLWZvcm0nXTtcclxuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydwbGFjZS1mb3JtJ107XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ2F2YXRhci1mb3JtJ11cclxuIiwiaW1wb3J0IHtcclxuICBlbGVtZW50Q2FwdGlvblNlbGVjdG9yLFxyXG4gIGVsZW1lbnRJbWFnZVNlbGVjdG9yLFxyXG4gIGVsZW1lbnRTZWxlY3RvcixcclxuICBlbGVtZW50TGlrZUNvdW50ZXIsXHJcbiAgZmF2QnV0dG9uU2VsZWN0b3IsXHJcbiAgcmVtb3ZlQnV0dG9uU2VsZWN0b3IsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBnZXRDdXJyZW50VXNlcixcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBvcGVuSW1hZ2VQb3B1cCxcclxuICAgIG9wZW5Db25maXJtUG9wdXAsXHJcbiAgICBsaWtlSGFuZGxlclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9saWtlSGFuZGxlciA9IGxpa2VIYW5kbGVyO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9nZXRDdXJyZW50VXNlciA9IGdldEN1cnJlbnRVc2VyO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9vcGVuSW1hZ2VQb3B1cCA9IG9wZW5JbWFnZVBvcHVwO1xyXG4gICAgdGhpcy5fb3BlbkNvbmZpcm1Qb3B1cCA9IG9wZW5Db25maXJtUG9wdXA7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50SW1hZ2VTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRMaWtlQ291bnRlcik7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50Q2FwdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3JlbW92ZUljb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2JpbicpO1xyXG4gICAgdGhpcy5fZmF2QnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZmF2QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudFNlbGVjdG9yKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHJlbW92ZUJ1dHRvblNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxyXG4gICAgICAgIHRoaXMuX29wZW5Db25maXJtUG9wdXAodGhpcy5fY2FyZElkLCB0aGlzLmVsZW1lbnQpXHJcbiAgICAgICk7XHJcbiAgICB0aGlzLmVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoZmF2QnV0dG9uU2VsZWN0b3IpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+XHJcbiAgICAgICAgdGhpcy5fbGlrZUhhbmRsZXIoZXZ0LCB0aGlzLl9jYXJkSWQsIHRoaXMuX2xpa2VDb3VudGVyKVxyXG4gICAgICApO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRJbWFnZVNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlUG9wdXAoeyBuYW1lOiBldnQudGFyZ2V0LmFsdCwgbGluazogZXZ0LnRhcmdldC5zcmMgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZ2V0Q3VycmVudFVzZXIudGhlbigodXNlcikgPT4ge1xyXG4gICAgICBpZiAodXNlci5faWQgPT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgICB0aGlzLl9yZW1vdmVJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoKGVsKSA9PiBlbC5faWQgPT09IHVzZXIuX2lkKSkge1xyXG4gICAgICAgIHRoaXMuX2ZhdkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19mYXZfYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgIHRoaXMuX2l0ZW1zLnRoZW4oaXRlbXMgPT4ge1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIodGhpcy5fY29udGFpbmVyLCBpdGVtKVxyXG4gICAgfSk7XHJcbiAgIH0pXHJcbiAgICBcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCl7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIHRoaXMudXNlciA9IHt9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlcikge1xyXG4gICAgaWYgKHVzZXIubmFtZSkge1xyXG4gICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXIuYWJvdXQpIHtcclxuICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXIuX2lkKSB7XHJcbiAgICAgIHRoaXMuX2lkID0gdXNlci5faWQ7XHJcbiAgICB9XHJcbiAgICBpZiAodXNlci5hdmF0YXIpIHtcclxuICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXIuYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8odXNlcikge1xyXG4gICAgdGhpcy51c2VyLm5hbWUgPSB1c2VyLm5hbWU7XHJcbiAgICB0aGlzLnVzZXIuYWJvdXQgPSB1c2VyLmFib3V0O1xyXG4gICAgdGhpcy51c2VyLmF2YXRhciA9IHVzZXIuYXZhdGFyO1xyXG4gICAgdGhpcy51c2VyLmlkID0gdXNlci5faWQ7XHJcbiAgICByZXR1cm4gdGhpcy51c2VyO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgb3Blbigpe1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKXtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpPT57XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWljb24nKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgcG9wdXBJbWFnZVNlbGVjdG9yLCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgb3Blbih7bmFtZSwgbGlua30pe1xyXG4gICAgc3VwZXIub3BlbigpXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cClcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBmb3JtU2VsZWN0b3IsIGlucHV0TGlzdFNlbGVjdG9yLCBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dExpc3RTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3QucmVkdWNlKChhY2MsIGN1cikgPT4ge1xyXG4gICAgICBhY2NbY3VyLm5hbWVdID0gY3VyLnZhbHVlO1xyXG4gICAgICByZXR1cm4gYWNjO1xyXG4gICAgfSwge30pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpe1xyXG4gICAgaWYoaXNMb2FkaW5nKXtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xyXG4gICAgfWVsc2Uge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkSWQsIHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmRJZCwgZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vcHRpb25zLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9vcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XHJcblxyXG4gICAgLy/QodCx0YDQvtGBINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LgsINC/0L7RgdC70LUg0YHQsNCx0LzQuNGC0LBcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICgpID0+IHRoaXMuc2V0QnV0dG9uU3RhdGUoKSxcclxuICAgICAgICAwXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9Cf0YDQvtCy0LXRgNC60LAg0LLRgdC10YUg0LjQvdC/0YPRgtC+0LIg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29wdGlvbnMuaW5wdXRTZWxlY3RvcilcclxuICAgICAgLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT5cclxuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICB0aGlzLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2dldElucHV0U3RhdHVzKHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL9C/0YDQvtCy0LXRgNC60LAg0LLRgdC10YUg0LjQvdC/0YPRgtC+0LIg0YTQvtGA0LzRi1xyXG4gIF9nZXRJbnB1dFN0YXR1cyhpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICAvL9Cj0YHRgtCw0L3QvtCy0LrQsFxc0YPQtNCw0LvQtdC90LjQtSDQv9C+0LvRjyDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgICA/IHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgOiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgLy/QktGL0LHQvtGAINC90YPQttC90L7Qs9C+IHNwYW4g0YEg0L7RiNC40LHQutC+0LlcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQubmFtZX0taW5wdXQtZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JCb3JkZXIpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5uYW1lfS1pbnB1dC1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5pbnB1dEVycm9yQm9yZGVyKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWNpdG9uLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzJztcclxuaW1wb3J0IHtcclxuICBlbGVtZW50c0NvbnRhaW5lcixcclxuICBlbGVtZW50c1RlbXBsYXRlLFxyXG4gIGpvYklucHV0LFxyXG4gIG5hbWVJbnB1dCxcclxuICBwbGFjZUZvcm0sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBwb3B1cFdpdGhJbWFnZVNlbGVjdG9yLFxyXG4gIHBvcHVwUGxhY2VTZWxlY3RvcixcclxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcixcclxuICBwb3B1cE5ld0F2YXRhclNlbGVjdG9yLFxyXG4gIHBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24sXHJcbiAgcG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIHVzZXJKb2IsXHJcbiAgdXNlck5hbWUsXHJcbiAgdXNlckF2YXRhcixcclxuICBwb3B1cENvbmZpcm1TZWxlY3RvcixcclxuICBlZHRpQXZhdGFyQnV0dG9uLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCAnLi4vLi4vcGFnZXMvaW5kZXguY3NzJztcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHByb2ZpbGVGb3JtKTtcclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHBsYWNlRm9ybSk7XHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgYXZhdGFyRm9ybSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiB1c2VyTmFtZSxcclxuICBqb2JTZWxlY3RvcjogdXNlckpvYixcclxuICBhdmF0YXJTZWxlY3RvcjogdXNlckF2YXRhcixcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKFxyXG4gICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzJyxcclxuICAnYmZlYTJmYjMtMWQ0OS00ZTBhLWJiYzQtMzMzYWEyZWZiMDg4J1xyXG4pO1xyXG5cclxuY29uc3QgdXNlciA9IGFwaS5nZXRVc2VyKCkuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbmNvbnN0IGNhcmRzID0gYXBpLmdldENhcmRzKCkuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG4vLyDQl9Cw0L/QvtC70L3QtdC90LjQtSDQv9GA0L7RhNC40LvRj1xyXG51c2VyLnRoZW4oKHVzZXIpID0+IHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpKVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChwbGFjZSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHBsYWNlLFxyXG4gICAgdXNlcixcclxuICAgIGVsZW1lbnRzVGVtcGxhdGUsXHJcbiAgICAoeyBuYW1lLCBsaW5rIH0pID0+IHBvcHVwV2l0aEltYWdlLm9wZW4oeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgLy8g0J/QtdGA0LXQtNCw0YfQsCDQtNCw0L3QvdGL0YUg0L4g0LrQsNGA0YLQvtGH0LrQtSDQuCDRjdC70LXQvNC10L3RgtC1INC60LDRgNGC0L7Rh9C60Lgg0LIg0L/QvtC/0LDQv1xyXG4gICAgKGNhcmRJZCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhDb25maXJtLm9wZW4oY2FyZElkLCBlbGVtZW50KTtcclxuICAgIH0sXHJcbiAgICAoZXZ0LCBjYXJkSWQsIGxpa2VDb3VudGVyKSA9PiB7XHJcbiAgICAgIGlmICghZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX2Zhdl9hY3RpdmUnKSkge1xyXG4gICAgICAgIGFwaS5hZGRMaWtlKGNhcmRJZClcclxuICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHVwZGF0ZWRDYXJkLmxpa2VzLmxlbmd0aH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcclxuICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHVwZGF0ZWRDYXJkLmxpa2VzLmxlbmd0aH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2Zhdl9hY3RpdmUnKTtcclxuICAgIH1cclxuICApLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5jb25zdCBwbGFjZUxpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogY2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNvbnRhaW5lciwgcGxhY2UpID0+IHtcclxuICAgICAgY29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKHBsYWNlKSlcclxuICAgIH0sXHJcbiAgfSxcclxuICBlbGVtZW50c0NvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBXaXRoSW1hZ2VTZWxlY3Rvcik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhVc2VySW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwUHJvZmlsZVNlbGVjdG9yLFxyXG4gICh7IG5hbWUsIGFib3V0IH0pID0+IHtcclxuICAgIHBvcHVwV2l0aFVzZXJJbmZvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyKHsgbmFtZSwgYWJvdXQgfSlcclxuICAgICAgLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyKTtcclxuICAgICAgICBwb3B1cFdpdGhVc2VySW5mby5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aFVzZXJJbmZvLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhQbGFjZUluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cFBsYWNlU2VsZWN0b3IsXHJcbiAgKHsgcGxhY2VOYW1lLCBwbGFjZUltYWdlIH0pID0+IHtcclxuICAgIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1Li4uLlxyXG4gICAgcG9wdXBXaXRoUGxhY2VJbmZvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoe1xyXG4gICAgICAgIG5hbWU6IHBsYWNlTmFtZSxcclxuICAgICAgICBsaW5rOiBwbGFjZUltYWdlLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocGxhY2UpID0+IHtcclxuICAgICAgICBwbGFjZUxpc3QuYWRkSXRlbShjcmVhdGVDYXJkKHBsYWNlKSk7XHJcbiAgICAgICAgcG9wdXBXaXRoUGxhY2VJbmZvLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoUGxhY2VJbmZvLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhOZXdBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cE5ld0F2YXRhclNlbGVjdG9yLFxyXG4gIChhdmF0YXJPYmopID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFVzZXJBdmF0YXIoYXZhdGFyT2JqKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoTmV3QXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oYXZhdGFyT2JqKTtcclxuICAgICAgICBwb3B1cFdpdGhOZXdBdmF0YXIuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhOZXdBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIHBvcHVwQ29uZmlybVNlbGVjdG9yLFxyXG4gIChjYXJkSWQsIGVsZW1lbnQpID0+IHtcclxuICAgIGFwaS5yZW1vdmVDYXJkKGNhcmRJZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgZWxlbWVudCA9IG51bGw7XHJcbiAgICAgIHBvcHVwV2l0aENvbmZpcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuLy8g0KDQtdC90LTQtdGAINC60LDRgNGC0L7Rh9C10LosINC/0L7RgdC70LUg0L/QvtC70YPRh9C10L3QuNGPINCy0YHQtdC5INC40L3RhNC+0YDQvNCw0YbQuNC4INGBINGB0LXRgNCy0LXRgNCwXHJcblByb21pc2UuYWxsKFt1c2VyLCBjYXJkc10pLnRoZW4oKCk9PiBwbGFjZUxpc3QucmVuZGVySXRlbXMoKSlcclxuXHJcbnBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XHJcbiAgdXNlci50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbyh1c2VyKTtcclxuICAgIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgICBqb2JJbnB1dC52YWx1ZSA9IGFib3V0O1xyXG4gICAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICBwb3B1cFdpdGhVc2VySW5mby5vcGVuKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbn0pO1xyXG5cclxucG9wdXBXaXRoUGxhY2VJbmZvT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XHJcbiAgcG9wdXBXaXRoUGxhY2VJbmZvLm9wZW4oKVxyXG4pO1xyXG5cclxuZWR0aUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiBwb3B1cFdpdGhOZXdBdmF0YXIub3BlbigpKTtcclxuXHJcbnBvcHVwV2l0aFVzZXJJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aFBsYWNlSW5mby5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhOZXdBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0JLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBsYWNlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiJdLCJuYW1lcyI6WyJBcGkiLCJiYXNlVXJsIiwidG9rZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfdG9rZW4iLCJrZXkiLCJ2YWx1ZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJfdGhpcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2dldFJlc3VsdCIsIl9yZWYiLCJfdGhpczIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhck9iaiIsIl90aGlzMyIsIl90aGlzNCIsIl9yZWYyIiwiX3RoaXM1IiwibGluayIsImNhcmRJZCIsIl90aGlzNiIsIl90aGlzNyIsIl90aGlzOCIsImVsZW1lbnRzVGVtcGxhdGUiLCJlbGVtZW50SW1hZ2VTZWxlY3RvciIsImZhdkJ1dHRvblNlbGVjdG9yIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckJvcmRlciIsImVkdGlBdmF0YXJCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cFdpdGhVc2VySW5mb09wZW5CdXR0b24iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24iLCJwcm9maWxlRm9ybSIsImZvcm1zIiwicGxhY2VGb3JtIiwiYXZhdGFyRm9ybSIsIkNhcmQiLCJkYXRhIiwiZ2V0Q3VycmVudFVzZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlbkltYWdlUG9wdXAiLCJvcGVuQ29uZmlybVBvcHVwIiwibGlrZUhhbmRsZXIiLCJfbmFtZSIsIl9saW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfbGlrZUhhbmRsZXIiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9nZXRDdXJyZW50VXNlciIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX29wZW5JbWFnZVBvcHVwIiwiX29wZW5Db25maXJtUG9wdXAiLCJlbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2xpa2VDb3VudGVyIiwiX2ltYWdlQ2FwdGlvbiIsIl9yZW1vdmVJY29uIiwiX2ZhdkJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiYWx0Iiwic3JjIiwidXNlciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImZpbmQiLCJlbCIsInRvZ2dsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJmb3JFYWNoIiwiaXRlbSIsInByZXBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfYWJvdXQiLCJfYXZhdGFyIiwiYXZhdGFyIiwiaWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX3BvcHVwIiwiYWRkIiwiY29udGFpbnMiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwSW1hZ2VDYXB0aW9uIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlU3VibWl0IiwiX2J1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJfZWxlbWVudCIsIkZvcm1WYWxpZGF0aW9uIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX29wdGlvbnMiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInNldFRpbWVvdXQiLCJzZXRCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudCIsIl90b2dnbGVJbnB1dEVycm9yIiwiX2dldElucHV0U3RhdHVzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicHJvZmlsZUZvcm1WYWxpZGF0aW9uIiwicGxhY2VGb3JtVmFsaWRhdGlvbiIsImF2YXRhckZvcm1WYWxpZGF0aW9uIiwidXNlckluZm8iLCJhcGkiLCJnZXRVc2VyIiwiY2F0Y2giLCJlcnIiLCJjYXJkcyIsImdldENhcmRzIiwiY3JlYXRlQ2FyZCIsInBsYWNlIiwicG9wdXBXaXRoSW1hZ2UiLCJvcGVuIiwicG9wdXBXaXRoQ29uZmlybSIsImxpa2VDb3VudGVyIiwicmVtb3ZlTGlrZSIsInVwZGF0ZWRDYXJkIiwiYWRkTGlrZSIsImdlbmVyYXRlQ2FyZCIsInNldFVzZXJJbmZvIiwicGxhY2VMaXN0IiwiY29udGFpbmVyIiwiYXBwZW5kIiwicG9wdXBXaXRoVXNlckluZm8iLCJyZW5kZXJMb2FkaW5nIiwiZWRpdFVzZXIiLCJmaW5hbGx5IiwicG9wdXBXaXRoUGxhY2VJbmZvIiwiX3JlZjMiLCJwbGFjZU5hbWUiLCJwbGFjZUltYWdlIiwiYWRkQ2FyZCIsImFkZEl0ZW0iLCJwb3B1cFdpdGhOZXdBdmF0YXIiLCJlZGl0VXNlckF2YXRhciIsInJlbW92ZUNhcmQiLCJhbGwiLCJyZW5kZXJJdGVtcyIsIl91c2VySW5mbyRnZXRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==