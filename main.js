(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e,this._token=n}var n,r;return n=t,(r=[{key:"_getResult",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUser",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"editUser",value:function(t){var e=this,n=t.name,r=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,about:r})}).then((function(t){return e._getResult(t)}))}},{key:"editUserAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return e._getResult(t)}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(e){return t._getResult(e)}))}},{key:"addCard",value:function(t){var e=this,n=t.name,r=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,link:r})}).then((function(t){return e._getResult(t)}))}},{key:"removeCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getResult(t)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=".elements__template",o=".element__image",i=".element__fav",u={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_active",inputErrorClass:"form__input-error",errorClass:"form__input-error_visible",inputErrorBorder:"form__input_error"},a=document.querySelector(".profile__avatar-container"),c=document.querySelector(".profile__button-change"),l=document.querySelector(".form__input_type_name"),s=document.querySelector(".form__input_type_occupation"),f=document.querySelector(".profile__button-add"),p=document.forms["profile-form"],y=document.forms["place-form"],m=document.forms["avatar-form"];function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var b=function(){function t(e,n,r,u,a,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._likeHandler=c,this._cardId=e._id,this._ownerId=e.owner._id,this._currentUser=n,this._templateSelector=r,this._openImagePopup=u,this._openConfirmPopup=a,this.element=this._getTemplate(),this._image=this.element.querySelector(o),this._likeCounter=this.element.querySelector(".element__fav-counter"),this._imageCaption=this.element.querySelector(".element__text"),this._removeIcon=this.element.querySelector(".element__bin"),this._favButton=this.element.querySelector(i)}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this.element.querySelector(".element__bin").addEventListener("click",(function(){return t._openConfirmPopup(t._cardId,t.element)})),this.element.querySelector(i).addEventListener("click",(function(e){return t._likeHandler(e,t._cardId,t._likeCounter)})),this.element.querySelector(o).addEventListener("click",(function(e){t._openImagePopup({name:e.target.alt,link:e.target.src})}))}},{key:"generateCard",value:function(){var t=this;return this._currentUser.id===this._ownerId&&this._removeIcon.classList.remove("disabled"),this._likes.find((function(e){return e._id===t._currentUser.id}))&&this._favButton.classList.toggle("element__fav_active"),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._imageCaption.textContent=this._name,this._likeCounter.textContent=this._likes.length,this.element}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(e._container,t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var E=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o),this.user={}}var e,n;return e=t,(n=[{key:"setUserInfo",value:function(t){t.name&&(this._name.textContent=t.name,this.user.name=t.name),t.about&&(this._about.textContent=t.about,this.user.about=t.about),t._id&&(this._id=t._id,this.user.id=t._id),t.avatar&&(this._avatar.src=t.avatar,this.user.avatar=t.avatar)}},{key:"getUserInfo",value:function(){return this.user}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var P=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&(window.removeEventListener("keydown",i._handleEscClose),i._popup.classList.remove("popup_opened"))},(r=O(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){window.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){window.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-icon"))&&t.close()})),window.addEventListener("keydown",this._handleEscClose)}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupImageCaption=e._popup.querySelector(".popup__image-caption"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;I(R(u.prototype),"open",this).call(this),console.log(this._popup),this._popupImage.src=n,this._popupImage.alt=e,this._popupImageCaption.textContent=e}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},A.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._handleSubmitForm=e,n._form=n._popup.querySelector(".form"),n._inputList=Array.from(n._form.querySelectorAll(".form__input")),n._submitButton=n._form.querySelector(u.submitButtonSelector),n}return e=a,(n=[{key:"_getInputValues",value:function(){return this._inputList.reduce((function(t,e){return t[e.name]=e.value,t}),{})}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var t=this;A(D(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){A(D(a.prototype),"close",this).call(this),this._form.reset()}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},H.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._button=n._popup.querySelector(u.submitButtonSelector),n._handleSubmit=e,n}return e=a,(n=[{key:"_setEventListeners",value:function(){var t=this;H(M(a.prototype),"setEventListeners",this).call(this),this._button.addEventListener("mousedown",(function(e){e.preventDefault(),t._handleSubmit(t._cardId,t._element)}))}},{key:"open",value:function(t,e){H(M(a.prototype),"open",this).call(this),this._cardId=t,this._element=e,this._setEventListeners()}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(P);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._formElement=n,this._inputList=function(t){if(Array.isArray(t))return G(t)}(r=this._formElement.querySelectorAll(this._options.inputSelector))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._formElement.addEventListener("submit",(function(t){return t.preventDefault()})),this._formElement.addEventListener("reset",(function(){setTimeout((function(){return t.setButtonState()}),0)})),this._formElement.querySelectorAll(this._options.inputSelector).forEach((function(e){return e.addEventListener("input",(function(){t._toggleInputError(e),t.setButtonState()}))}))}},{key:"setButtonState",value:function(){this._getInputStatus(this._inputList)?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._options.activeButtonClass)):(this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.add(this._options.activeButtonClass))}},{key:"_getInputStatus",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleInputError",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.name,"-input-error"));e.textContent=t.validationMessage,e.classList.add(this._options.errorClass),t.classList.add(this._options.inputErrorBorder)}},{key:"_hideInputError",value:function(t){this._formElement.querySelector(".".concat(t.name,"-input-error")).classList.remove(this._options.errorClass),t.classList.remove(this._options.inputErrorBorder)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new Q(u,p),Y=new Q(u,y),Z=new Q(u,m),tt=new E({nameSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"}),et=new n("https://mesto.nomoreparties.co/v1/cohort-63","bfea2fb3-1d49-4e0a-bbc4-333aa2efb088");Promise.all([et.getUser(),et.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];tt.setUserInfo(o),nt.renderItems(i)})).catch((function(t){return console.error(t)}));var nt=new g({renderer:function(t,e){t.append(rt(e))}},".elements");function rt(t){return new b(t,tt.getUserInfo(),r,(function(t){var e=t.name,n=t.link;return it.open({name:e,link:n})}),(function(t,e){ct.open(t,e)}),(function(t,e,n){t.target.classList.contains("element__fav_active")?et.removeLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})):et.addLike(e).then((function(t){n.textContent=t.likes.length})).catch((function(t){return console.log(t)})),t.target.classList.toggle("element__fav_active")})).generateCard()}c.addEventListener("mousedown",(function(){var t=tt.getUserInfo(),e=t.name,n=t.about;l.value=e,s.value=n,X.setButtonState(),ut.open()}));var ot=new z(".popup_type_place",(function(t){var e=t.placeName,n=t.placeImage;ot.renderLoading(!0),et.addCard({name:e,link:n}).then((function(t){nt.addItem(rt(t)),ot.close()})).catch((function(t){return console.log(t)})).finally((function(){ot.renderLoading(!1)}))})),it=new q(".popup_type_image"),ut=new z(".popup_type_profile",(function(t){var e=t.name,n=t.about;ut.renderLoading(!0),et.editUser({name:e,about:n}).then((function(t){tt.setUserInfo(t),ut.close()})).catch((function(t){return console.log(t)})).finally((function(){ut.renderLoading(!1)}))})),at=new z(".popup_type_avatar",(function(t){at.renderLoading(!0),et.editUserAvatar(t).then((function(){tt.setUserInfo(t),at.close()})).catch((function(t){return console.log(t)})).finally((function(){at.renderLoading(!1)}))})),ct=new F(".popup_type_confirm",(function(t,e){et.removeCard(t).then((function(){e.remove(),e=null,ct.close()})).catch((function(t){return console.log(t)}))}));f.addEventListener("click",(function(){return ot.open()})),a.addEventListener("mousedown",(function(){return at.open()})),ut.setEventListeners(),ot.setEventListeners(),it.setEventListeners(),at.setEventListeners(),X.enableValidation(),Y.enableValidation(),Z.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RjlJLEVBQTZCa0MsaUJBQWlCLFNBQVMsa0JBQ3JEOEgsR0FBbUJULE1BQU0sSUFFM0I3SixFQUFpQndDLGlCQUFpQixhQUFhLGtCQUFNd0ksR0FBbUJuQixNQUFNLElBQzlFUSxHQUFrQmMsb0JBQ2xCYixHQUFtQmEsb0JBQ25CdkIsR0FBZXVCLG9CQUNmSCxHQUFtQkcsb0JBRW5CNUMsRUFBc0I2QyxtQkFDdEI1QyxFQUFvQjRDLG1CQUNwQjNDLEVBQXFCMkMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWNpdG9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoYmFzZVVybCwgdG9rZW4pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICB9XHJcblxyXG4gIF9nZXRSZXN1bHQocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXIoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gICAgICBcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXN1bHQocmVzKSlcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyQXZhdGFyKGF2YXRhck9iaikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyT2JqKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzdWx0KHJlcykpXHJcbiAgICAgIFxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3VsdChyZXMpKVxyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2VTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wbGFjZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9wcm9maWxlJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfaW1hZ2UnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBOZXdBdmF0YXJTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9hdmF0YXInO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDb25maXJtU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfY29uZmlybSc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlck5hbWUgPSAnLnByb2ZpbGVfX25hbWUnO1xyXG5leHBvcnQgY29uc3QgdXNlckpvYiA9ICcucHJvZmlsZV9fb2NjdXBhdGlvbic7XHJcbmV4cG9ydCBjb25zdCB1c2VyQXZhdGFyID0gJy5wcm9maWxlX19hdmF0YXInXHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudHNDb250YWluZXIgPSAnLmVsZW1lbnRzJztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzVGVtcGxhdGUgPSAnLmVsZW1lbnRzX190ZW1wbGF0ZSc7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50U2VsZWN0b3IgPSAnLmVsZW1lbnQnO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudEltYWdlU2VsZWN0b3IgPSAnLmVsZW1lbnRfX2ltYWdlJztcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRDYXB0aW9uU2VsZWN0b3IgPSAnLmVsZW1lbnRfX3RleHQnXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50TGlrZUNvdW50ZXIgPSAnLmVsZW1lbnRfX2Zhdi1jb3VudGVyJ1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlQnV0dG9uU2VsZWN0b3IgPSAnLmVsZW1lbnRfX2Jpbic7XHJcbmV4cG9ydCBjb25zdCBmYXZCdXR0b25TZWxlY3RvciA9ICcuZWxlbWVudF9fZmF2JztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICBhY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxuICBpbnB1dEVycm9yQm9yZGVyOiBcImZvcm1fX2lucHV0X2Vycm9yXCIsXHJcbn1cclxuXHJcbi8vINCa0L3QvtC/0LrQsCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuZXhwb3J0IGNvbnN0IGVkdGlBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lcicpXHJcbi8vINCa0L3QvtC/0LrQsCDQuCDRhNC+0YDQvNCwINC/0L7Qv9Cw0L8g0L/RgNC+0YTQuNC70Y9cclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aFVzZXJJbmZvT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgJy5wcm9maWxlX19idXR0b24tY2hhbmdlJ1xyXG4pO1xyXG5leHBvcnQgY29uc3QgaW5wdXRMaXN0U2VsZWN0b3IgPSAnLmZvcm1fX2lucHV0JztcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfb2NjdXBhdGlvbicpO1xyXG4vLyDQmtC90L7Qv9C60LAg0Lgg0LjQvdC/0YPRgtGLINC/0L7Qv9Cw0L8g0L3QvtCy0L7QtSDQvNC10YHRgtC+XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhQbGFjZUluZm9PcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAnLnByb2ZpbGVfX2J1dHRvbi1hZGQnXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX19pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yID0nLnBvcHVwX19pbWFnZS1jYXB0aW9uJztcclxuZXhwb3J0IGNvbnN0IGZvcm1TZWxlY3RvciA9ICcuZm9ybSc7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydwcm9maWxlLWZvcm0nXTtcclxuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydwbGFjZS1mb3JtJ107XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ2F2YXRhci1mb3JtJ11cclxuIiwiaW1wb3J0IHtcclxuICBlbGVtZW50Q2FwdGlvblNlbGVjdG9yLFxyXG4gIGVsZW1lbnRJbWFnZVNlbGVjdG9yLFxyXG4gIGVsZW1lbnRTZWxlY3RvcixcclxuICBlbGVtZW50TGlrZUNvdW50ZXIsXHJcbiAgZmF2QnV0dG9uU2VsZWN0b3IsXHJcbiAgcmVtb3ZlQnV0dG9uU2VsZWN0b3IsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBjdXJyZW50VXNlcixcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBvcGVuSW1hZ2VQb3B1cCxcclxuICAgIG9wZW5Db25maXJtUG9wdXAsXHJcbiAgICBsaWtlSGFuZGxlclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9saWtlSGFuZGxlciA9IGxpa2VIYW5kbGVyO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9vcGVuSW1hZ2VQb3B1cCA9IG9wZW5JbWFnZVBvcHVwO1xyXG4gICAgdGhpcy5fb3BlbkNvbmZpcm1Qb3B1cCA9IG9wZW5Db25maXJtUG9wdXA7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50SW1hZ2VTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRMaWtlQ291bnRlcik7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50Q2FwdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3JlbW92ZUljb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2JpbicpO1xyXG4gICAgdGhpcy5fZmF2QnV0dG9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZmF2QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudFNlbGVjdG9yKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHJlbW92ZUJ1dHRvblNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxyXG4gICAgICAgIHRoaXMuX29wZW5Db25maXJtUG9wdXAodGhpcy5fY2FyZElkLCB0aGlzLmVsZW1lbnQpXHJcbiAgICAgICk7XHJcbiAgICB0aGlzLmVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoZmF2QnV0dG9uU2VsZWN0b3IpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+XHJcbiAgICAgICAgdGhpcy5fbGlrZUhhbmRsZXIoZXZ0LCB0aGlzLl9jYXJkSWQsIHRoaXMuX2xpa2VDb3VudGVyKVxyXG4gICAgICApO1xyXG4gICAgdGhpcy5lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRJbWFnZVNlbGVjdG9yKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlUG9wdXAoeyBuYW1lOiBldnQudGFyZ2V0LmFsdCwgbGluazogZXZ0LnRhcmdldC5zcmMgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICBpZiAodGhpcy5fY3VycmVudFVzZXIuaWQgPT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgICB0aGlzLl9yZW1vdmVJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoKGVsKSA9PiBlbC5faWQgPT09IHRoaXMuX2N1cnJlbnRVc2VyLmlkKSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2ZhdkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19mYXZfYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcih0aGlzLl9jb250YWluZXIsIGl0ZW0pXHJcbiAgICB9KTtcclxuICAgICAgIFxyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KXtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy51c2VyID0ge307XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyKSB7XHJcbiAgICBpZiAodXNlci5uYW1lKSB7XHJcbiAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICAgIHRoaXMudXNlci5uYW1lID0gdXNlci5uYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXIuYWJvdXQpIHtcclxuICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gICAgICB0aGlzLnVzZXIuYWJvdXQgPSB1c2VyLmFib3V0O1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXIuX2lkKSB7XHJcbiAgICAgIHRoaXMuX2lkID0gdXNlci5faWQ7XHJcbiAgICAgIHRoaXMudXNlci5pZCA9IHVzZXIuX2lkO1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXIuYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSB1c2VyLmF2YXRhcjtcclxuICAgICAgdGhpcy51c2VyLmF2YXRhciA9IHVzZXIuYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy51c2VyO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgb3Blbigpe1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKXtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpPT57XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWljb24nKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgcG9wdXBJbWFnZVNlbGVjdG9yLCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgb3Blbih7bmFtZSwgbGlua30pe1xyXG4gICAgc3VwZXIub3BlbigpXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cClcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBmb3JtU2VsZWN0b3IsIGlucHV0TGlzdFNlbGVjdG9yLCBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dExpc3RTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3QucmVkdWNlKChhY2MsIGN1cikgPT4ge1xyXG4gICAgICBhY2NbY3VyLm5hbWVdID0gY3VyLnZhbHVlO1xyXG4gICAgICByZXR1cm4gYWNjO1xyXG4gICAgfSwge30pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpe1xyXG4gICAgaWYoaXNMb2FkaW5nKXtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xyXG4gICAgfWVsc2Uge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkSWQsIHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmRJZCwgZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vcHRpb25zLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9vcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XHJcblxyXG4gICAgLy/QodCx0YDQvtGBINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LgsINC/0L7RgdC70LUg0YHQsNCx0LzQuNGC0LBcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICgpID0+IHRoaXMuc2V0QnV0dG9uU3RhdGUoKSxcclxuICAgICAgICAwXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9Cf0YDQvtCy0LXRgNC60LAg0LLRgdC10YUg0LjQvdC/0YPRgtC+0LIg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29wdGlvbnMuaW5wdXRTZWxlY3RvcilcclxuICAgICAgLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT5cclxuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICB0aGlzLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2dldElucHV0U3RhdHVzKHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL9C/0YDQvtCy0LXRgNC60LAg0LLRgdC10YUg0LjQvdC/0YPRgtC+0LIg0YTQvtGA0LzRi1xyXG4gIF9nZXRJbnB1dFN0YXR1cyhpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICAvL9Cj0YHRgtCw0L3QvtCy0LrQsFxc0YPQtNCw0LvQtdC90LjQtSDQv9C+0LvRjyDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgICA/IHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgOiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgLy/QktGL0LHQvtGAINC90YPQttC90L7Qs9C+IHNwYW4g0YEg0L7RiNC40LHQutC+0LlcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQubmFtZX0taW5wdXQtZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JCb3JkZXIpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5uYW1lfS1pbnB1dC1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5pbnB1dEVycm9yQm9yZGVyKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWNpdG9uLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzJztcclxuaW1wb3J0IHtcclxuICBlbGVtZW50c0NvbnRhaW5lcixcclxuICBlbGVtZW50c1RlbXBsYXRlLFxyXG4gIGpvYklucHV0LFxyXG4gIG5hbWVJbnB1dCxcclxuICBwbGFjZUZvcm0sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBwb3B1cFdpdGhJbWFnZVNlbGVjdG9yLFxyXG4gIHBvcHVwUGxhY2VTZWxlY3RvcixcclxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcixcclxuICBwb3B1cE5ld0F2YXRhclNlbGVjdG9yLFxyXG4gIHBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24sXHJcbiAgcG9wdXBXaXRoVXNlckluZm9PcGVuQnV0dG9uLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIHVzZXJKb2IsXHJcbiAgdXNlck5hbWUsXHJcbiAgdXNlckF2YXRhcixcclxuICBwb3B1cENvbmZpcm1TZWxlY3RvcixcclxuICBlZHRpQXZhdGFyQnV0dG9uLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCAnLi4vLi4vcGFnZXMvaW5kZXguY3NzJztcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHByb2ZpbGVGb3JtKTtcclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHBsYWNlRm9ybSk7XHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgYXZhdGFyRm9ybSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiB1c2VyTmFtZSxcclxuICBqb2JTZWxlY3RvcjogdXNlckpvYixcclxuICBhdmF0YXJTZWxlY3RvcjogdXNlckF2YXRhcixcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKFxyXG4gICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzJyxcclxuICAnYmZlYTJmYjMtMWQ0OS00ZTBhLWJiYzQtMzMzYWEyZWZiMDg4J1xyXG4pO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VyKCksIGFwaS5nZXRDYXJkcygpXSlcclxuICAudGhlbigoW3VzZXIsIGNhcmRzXSkgPT4ge1xyXG4gICAgLy8g0JfQsNC/0L7Qu9C90LXQvdC40LUg0L/RgNC+0YTQuNC70Y9cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xyXG4gICAgLy/QoNC10L3QtNC10YAg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgcGxhY2VMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cclxuY29uc3QgcGxhY2VMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChjb250YWluZXIsIHBsYWNlKSA9PiB7XHJcbiAgICAgIGNvbnRhaW5lci5hcHBlbmQoY3JlYXRlQ2FyZChwbGFjZSkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGVsZW1lbnRzQ29udGFpbmVyXHJcbik7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKHBsYWNlKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgcGxhY2UsXHJcbiAgICB1c2VySW5mby5nZXRVc2VySW5mbygpLFxyXG4gICAgZWxlbWVudHNUZW1wbGF0ZSxcclxuICAgICh7IG5hbWUsIGxpbmsgfSkgPT4gcG9wdXBXaXRoSW1hZ2Uub3Blbih7IG5hbWUsIGxpbmsgfSksXHJcbiAgICAvLyDQn9C10YDQtdC00LDRh9CwINC00LDQvdC90YvRhSDQviDQutCw0YDRgtC+0YfQutC1INC4INGN0LvQtdC80LXQvdGC0LUg0LrQsNGA0YLQvtGH0LrQuCDQsiDQv9C+0L/QsNC/XHJcbiAgICAoY2FyZElkLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgIHBvcHVwV2l0aENvbmZpcm0ub3BlbihjYXJkSWQsIGVsZW1lbnQpO1xyXG4gICAgfSxcclxuICAgIChldnQsIGNhcmRJZCwgbGlrZUNvdW50ZXIpID0+IHtcclxuICAgICAgaWYgKCFldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fZmF2X2FjdGl2ZScpKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB1cGRhdGVkQ2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnJlbW92ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdXBkYXRlZENhcmQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgfVxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2Zhdl9hY3RpdmUnKTtcclxuICAgIH1cclxuICApLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5wb3B1cFdpdGhVc2VySW5mb09wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IGFib3V0O1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gIHBvcHVwV2l0aFVzZXJJbmZvLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhQbGFjZUluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cFBsYWNlU2VsZWN0b3IsXHJcbiAgKHsgcGxhY2VOYW1lLCBwbGFjZUltYWdlIH0pID0+IHtcclxuICAgIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1Li4uLlxyXG4gICAgcG9wdXBXaXRoUGxhY2VJbmZvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoe1xyXG4gICAgICAgIG5hbWU6IHBsYWNlTmFtZSxcclxuICAgICAgICBsaW5rOiBwbGFjZUltYWdlLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocGxhY2UpID0+IHtcclxuICAgICAgICBwbGFjZUxpc3QuYWRkSXRlbShjcmVhdGVDYXJkKHBsYWNlKSk7XHJcbiAgICAgICAgcG9wdXBXaXRoUGxhY2VJbmZvLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoUGxhY2VJbmZvLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFdpdGhJbWFnZVNlbGVjdG9yKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aFVzZXJJbmZvID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXHJcbiAgKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xyXG4gICAgcG9wdXBXaXRoVXNlckluZm8ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFVzZXIoeyBuYW1lLCBhYm91dCB9KVxyXG4gICAgICAudGhlbigodXNlcikgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xyXG4gICAgICAgIHBvcHVwV2l0aFVzZXJJbmZvLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoVXNlckluZm8ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aE5ld0F2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwTmV3QXZhdGFyU2VsZWN0b3IsXHJcbiAgKGF2YXRhck9iaikgPT4ge1xyXG4gICAgcG9wdXBXaXRoTmV3QXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyQXZhdGFyKGF2YXRhck9iailcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGF2YXRhck9iaik7XHJcbiAgICAgICAgcG9wdXBXaXRoTmV3QXZhdGFyLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoTmV3QXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcbmNvbnN0IHBvcHVwV2l0aENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIHBvcHVwQ29uZmlybVNlbGVjdG9yLFxyXG4gIChjYXJkSWQsIGVsZW1lbnQpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlQ2FyZChjYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIGVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxuKTtcclxucG9wdXBXaXRoUGxhY2VJbmZvT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XHJcbiAgcG9wdXBXaXRoUGxhY2VJbmZvLm9wZW4oKVxyXG4pO1xyXG5lZHRpQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICgpID0+IHBvcHVwV2l0aE5ld0F2YXRhci5vcGVuKCkpO1xyXG5wb3B1cFdpdGhVc2VySW5mby5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhQbGFjZUluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoTmV3QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8v0JLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBsYWNlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiJdLCJuYW1lcyI6WyJBcGkiLCJiYXNlVXJsIiwidG9rZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfdG9rZW4iLCJrZXkiLCJ2YWx1ZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJfdGhpcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2dldFJlc3VsdCIsIl9yZWYiLCJfdGhpczIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhck9iaiIsIl90aGlzMyIsIl90aGlzNCIsIl9yZWYyIiwiX3RoaXM1IiwibGluayIsImNhcmRJZCIsIl90aGlzNiIsIl90aGlzNyIsIl90aGlzOCIsImVsZW1lbnRzVGVtcGxhdGUiLCJlbGVtZW50SW1hZ2VTZWxlY3RvciIsImZhdkJ1dHRvblNlbGVjdG9yIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckJvcmRlciIsImVkdGlBdmF0YXJCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cFdpdGhVc2VySW5mb09wZW5CdXR0b24iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBvcHVwV2l0aFBsYWNlSW5mb09wZW5CdXR0b24iLCJwcm9maWxlRm9ybSIsImZvcm1zIiwicGxhY2VGb3JtIiwiYXZhdGFyRm9ybSIsIkNhcmQiLCJkYXRhIiwiY3VycmVudFVzZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlbkltYWdlUG9wdXAiLCJvcGVuQ29uZmlybVBvcHVwIiwibGlrZUhhbmRsZXIiLCJfbmFtZSIsIl9saW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfbGlrZUhhbmRsZXIiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9jdXJyZW50VXNlciIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX29wZW5JbWFnZVBvcHVwIiwiX29wZW5Db25maXJtUG9wdXAiLCJlbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2xpa2VDb3VudGVyIiwiX2ltYWdlQ2FwdGlvbiIsIl9yZW1vdmVJY29uIiwiX2ZhdkJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiYWx0Iiwic3JjIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJmaW5kIiwiZWwiLCJ0b2dnbGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2Fib3V0IiwiX2F2YXRhciIsInVzZXIiLCJhdmF0YXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX3BvcHVwIiwiYWRkIiwiY29udGFpbnMiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwSW1hZ2VDYXB0aW9uIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlU3VibWl0IiwiX2J1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJfZWxlbWVudCIsIkZvcm1WYWxpZGF0aW9uIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX29wdGlvbnMiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInNldFRpbWVvdXQiLCJzZXRCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudCIsIl90b2dnbGVJbnB1dEVycm9yIiwiX2dldElucHV0U3RhdHVzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicHJvZmlsZUZvcm1WYWxpZGF0aW9uIiwicGxhY2VGb3JtVmFsaWRhdGlvbiIsImF2YXRhckZvcm1WYWxpZGF0aW9uIiwidXNlckluZm8iLCJhcGkiLCJhbGwiLCJnZXRVc2VyIiwiZ2V0Q2FyZHMiLCJjYXJkcyIsInNldFVzZXJJbmZvIiwicGxhY2VMaXN0IiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImVycm9yIiwiY29udGFpbmVyIiwicGxhY2UiLCJhcHBlbmQiLCJjcmVhdGVDYXJkIiwiZ2V0VXNlckluZm8iLCJfcmVmMyIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInBvcHVwV2l0aENvbmZpcm0iLCJsaWtlQ291bnRlciIsInJlbW92ZUxpa2UiLCJ1cGRhdGVkQ2FyZCIsImFkZExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJwb3B1cFdpdGhVc2VySW5mbyIsInBvcHVwV2l0aFBsYWNlSW5mbyIsIl9yZWY0IiwicGxhY2VOYW1lIiwicGxhY2VJbWFnZSIsInJlbmRlckxvYWRpbmciLCJhZGRDYXJkIiwiYWRkSXRlbSIsImZpbmFsbHkiLCJfcmVmNSIsImVkaXRVc2VyIiwicG9wdXBXaXRoTmV3QXZhdGFyIiwiZWRpdFVzZXJBdmF0YXIiLCJyZW1vdmVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==